<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Слот-машина Premium - 10 стилей</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&family=Orbitron:wght@400;700;900&family=Montserrat:wght@400;600;700&family=Press+Start+2P&family=Cinzel:wght@400;700;900&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <!-- GSAP Plugins -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
  <!-- Anime.js - для дополнительных анимаций -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <!-- Particles.js - для продвинутых частиц -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- Howler.js - для качественного звука -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
  <!-- AOS - Animate On Scroll -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <!-- Mo.js - для моушн-графики -->
  <script src="https://cdn.jsdelivr.net/npm/@mojs/core@latest/dist/mo.umd.js"></script>
  <!-- Matter.js - для физики (для 3D эффектов) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <!-- p5.js - для креативных визуальных эффектов -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <!-- Lottie - для векторных анимаций (опционально) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0;
      padding: 0;
      transition: background 0.5s ease;
      font-family: 'Poppins', sans-serif;
      overflow: hidden;
    }

    #app {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      transition: all 0.5s ease;
    }

    /* Частицы фона */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
    }

    /* Кнопка переключения меню (три полоски) */
    .menu-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1001;
      width: 45px;
      height: 45px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 5px;
      padding: 8px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }
    
    .menu-toggle:hover {
      background: rgba(0, 0, 0, 0.7);
      border-color: rgba(255, 255, 255, 0.5);
      transform: scale(1.05);
    }
    
    .menu-toggle span {
      width: 24px;
      height: 3px;
      background: white;
      border-radius: 2px;
      transition: all 0.3s ease;
      display: block;
    }
    
    .menu-toggle.active span:nth-child(1) {
      transform: rotate(45deg) translate(7px, 7px);
    }
    
    .menu-toggle.active span:nth-child(2) {
      opacity: 0;
    }
    
    .menu-toggle.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    
    /* Стиль переключателя - вертикальное компактное меню */
    .style-switcher {
      position: fixed;
      top: 75px;
      left: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-width: 140px;
      max-height: 85vh;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 8px;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      transform: translateX(0);
      opacity: 1;
    }
    
    .style-switcher.hidden {
      transform: translateX(-160px);
      opacity: 0;
      pointer-events: none;
    }

    .style-switcher::-webkit-scrollbar {
      width: 4px;
    }

    .style-switcher::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
    }

    .style-switcher::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
    }

    .style-btn {
      padding: 5px 8px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 9px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      font-family: 'Montserrat', sans-serif;
      white-space: nowrap;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 5px;
      text-align: left;
    }

    .style-btn i {
      font-size: 10px;
      width: 12px;
      text-align: center;
    }

    .style-btn:hover {
      transform: translateX(-3px);
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
    }

    .style-btn.active {
      transform: translateX(-5px);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
      border-left: 3px solid rgba(255, 255, 255, 0.8);
    }

    .doors {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      position: relative;
      z-index: 10;
      align-items: center;
    }
    
    .lever-container {
      position: relative;
      width: 60px;
      height: 140px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      margin-left: 20px;
    }

    .lever-base {
      width: 35px;
      height: 8px;
      background: linear-gradient(145deg, #808080, #606060);
      border-radius: 4px;
      box-shadow: 
        inset 0 1px 3px rgba(255, 255, 255, 0.3),
        inset 0 -1px 3px rgba(0, 0, 0, 0.5);
    }

    .lever {
      width: 18px;
      height: 110px;
      background: linear-gradient(90deg, #8b0000, #ff0000, #cc0000, #ff0000);
      border-radius: 9px;
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      cursor: pointer;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.6),
        inset 0 2px 6px rgba(255, 255, 255, 0.2),
        inset -2px 0 4px rgba(0, 0, 0, 0.3);
      transition: transform 0.1s;
      z-index: 1;
    }

    .lever::before {
      content: '';
      position: absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      width: 32px;
      height: 32px;
      background: radial-gradient(circle, #ff0000, #cc0000, #8b0000);
      border-radius: 50%;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.7),
        inset 0 3px 8px rgba(255, 255, 255, 0.3),
        inset 0 -2px 5px rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .lever:hover {
      transform: translateX(-50%) translateX(-3px);
    }

    .lever.pulled {
      transform: translateX(-50%) translateX(-12px) rotate(-8deg);
    }

    .door {
      overflow: hidden;
      border-radius: 15px;
      margin: 5px;
      transition: all 0.5s ease;
      position: relative;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transform-style: preserve-3d;
    }
    
    .door .boxes {
      position: relative;
    }

    .boxes {
      will-change: transform;
    }
    
    .door.loop .boxes {
      animation: slide 0.1s infinite linear;
    }
    
    .door.stop .boxes {
      animation: stop 0.5s ease-out forwards;
      animation-iteration-count: 1;
    }
    
    @keyframes slide {
      0% {
        transform: translateY(0);
      }
      100% {
        transform: translateY(-110px);
      }
    }
    
    @keyframes stop {
      0% {
        transform: translateY(var(--start-y, 0px));
      }
      100% {
        transform: translateY(var(--stop-y, 0px));
      }
    }
    
    .door.slot2.loop .boxes {
      animation-delay: 0.05s;
    }
    
    .door.slot3.loop .boxes {
      animation-delay: 0.1s;
    }
    
    .door.loop .boxes {
      animation: slide 0.1s infinite linear;
    }
    
    .door.stop .boxes {
      animation: stop 0.5s ease-out forwards;
    }
    
    @keyframes slide {
      0% {
        transform: translateY(0);
      }
      100% {
        transform: translateY(-110px);
      }
    }
    
    @keyframes stop {
      0% {
        transform: translateY(var(--start-y));
      }
      100% {
        transform: translateY(var(--stop-y));
      }
    }

    .box {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3rem;
      transition: all 0.3s ease;
    }

    .buttons {
      margin: 1rem 0 2rem 0;
      display: flex;
      gap: 15px;
      align-items: center;
      position: relative;
      z-index: 10;
    }

    button {
      cursor: pointer;
      font-size: 1.1rem;
      margin: 0;
      border: none;
      border-radius: 12px;
      padding: 12px 24px;
      font-weight: 600;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      position: relative;
      overflow: hidden;
    }

    button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    button:active::before {
      width: 300px;
      height: 300px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    #spinner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    #reseter {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    .info {
      position: fixed;
      bottom: 20px;
      width: 100%;
      text-align: center;
      padding: 1rem;
      font-size: 14px;
      font-weight: 500;
      transition: color 0.5s ease;
      z-index: 10;
    }

    .style-tag {
      position: fixed;
      top: 20px;
      left: 170px;
      padding: 10px 20px;
      border-radius: 25px;
      font-weight: 700;
      font-size: 14px;
      font-family: 'Orbitron', sans-serif;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.5s ease;
      z-index: 1000;
    }

    /* Контейнер игры */
    .game-container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    /* Стили для блэкджека перенесены в blackjack.html */

    /* 3D Canvas для некоторых стилей */
    #canvas-3d {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2;
    }

    /* СТИЛЬ 1: Классический - Настоящий слот-автомат */
    .style-classic #app {
      background: linear-gradient(135deg, #1a2b45 0%, #2c3e50 100%);
      position: relative;
    }
    
    /* Корпус слот-машины */
    .style-classic #app::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 500px;
      height: 600px;
      background: linear-gradient(145deg, #4a90e2 0%, #357abd 100%);
      border: 4px solid #cc0000;
      border-radius: 25px;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.5),
        inset 0 2px 10px rgba(255, 255, 255, 0.3),
        inset 0 -5px 15px rgba(0, 0, 0, 0.3);
      z-index: 0;
      pointer-events: none;
    }
    
    /* Баннер JACKPOT */
    .style-classic #app::after {
      content: 'JACKPOT';
      position: absolute;
      top: calc(50% - 250px);
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #cc0000 0%, #ff0000 100%);
      color: white;
      font-weight: 900;
      font-size: 32px;
      padding: 12px 40px;
      border-radius: 15px;
      border: 3px solid #ffd700;
      box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.4),
        inset 0 2px 5px rgba(255, 255, 255, 0.3);
      z-index: 5;
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 4px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      pointer-events: none;
    }
    
    /* Контейнер для барабанов внутри автомата */
    .style-classic .doors {
      position: relative;
      z-index: 10;
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 15px;
      border: 3px solid #357abd;
      box-shadow: 
        inset 0 5px 15px rgba(0, 0, 0, 0.2),
        0 0 20px rgba(0, 0, 0, 0.3);
      margin: 0 auto;
      width: fit-content;
    }

    .style-classic .door {
      background: #ffffff;
      width: 100px;
      height: 110px;
      border-radius: 8px;
      border: 2px solid #357abd;
      box-shadow: 
        inset 0 2px 8px rgba(0, 0, 0, 0.1),
        0 2px 4px rgba(0, 0, 0, 0.2);
      margin: 0 5px;
    }
    
    /* Рычаг в классическом стиле */
    .style-classic .lever-container {
      position: relative;
      width: 80px;
      height: 180px;
      margin-left: 30px;
      z-index: 15;
    }
    
    .style-classic .lever-base {
      width: 50px;
      height: 12px;
      background: linear-gradient(145deg, #666666, #444444);
      border-radius: 6px;
      box-shadow: 
        inset 0 2px 5px rgba(255, 255, 255, 0.2),
        inset 0 -2px 5px rgba(0, 0, 0, 0.5),
        0 4px 10px rgba(0, 0, 0, 0.4);
      border: 2px solid #333333;
    }
    
    .style-classic .lever {
      width: 24px;
      height: 140px;
      background: linear-gradient(90deg, #8b0000, #ff0000, #cc0000, #ff0000);
      border-radius: 12px;
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      cursor: pointer;
      box-shadow: 
        0 6px 15px rgba(0, 0, 0, 0.7),
        inset 0 3px 8px rgba(255, 255, 255, 0.3),
        inset -3px 0 6px rgba(0, 0, 0, 0.4);
      transition: transform 0.2s ease;
      z-index: 1;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    .style-classic .lever::before {
      content: '';
      position: absolute;
      top: -22px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 40px;
      background: radial-gradient(circle, #ff0000, #cc0000, #8b0000);
      border-radius: 50%;
      box-shadow: 
        0 6px 15px rgba(0, 0, 0, 0.8),
        inset 0 4px 10px rgba(255, 255, 255, 0.4),
        inset 0 -3px 8px rgba(0, 0, 0, 0.6);
      border: 3px solid rgba(255, 255, 255, 0.3);
    }
    
    .style-classic .lever:hover {
      transform: translateX(-50%) translateX(-5px);
    }
    
    .style-classic .lever.pulled {
      transform: translateX(-50%) translateX(-20px) rotate(-12deg);
    }
    
    /* Дисплей внизу автомата */
    .style-classic .info {
      color: #00ff00;
      background: rgba(0, 0, 0, 0.9);
      padding: 15px 30px;
      border-radius: 8px;
      border: 2px solid #00ff00;
      box-shadow: 
        0 0 20px rgba(0, 255, 0, 0.5),
        inset 0 0 20px rgba(0, 255, 0, 0.1);
      font-family: 'Courier New', monospace;
      font-size: 18px;
      font-weight: bold;
      text-shadow: 0 0 10px #00ff00;
      position: relative;
      z-index: 10;
      margin-top: 20px;
      width: fit-content;
      margin-left: auto;
      margin-right: auto;
    }
    
    .style-classic .info::before {
      content: 'WIN: ';
      color: #00ff00;
    }

    .style-classic .style-tag {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    /* СТИЛЬ 2: Градиентный */
    .style-gradient #app {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    }

    .style-gradient .door {
      background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
      width: 120px;
      height: 130px;
      border-radius: 20px;
      border: 3px solid rgba(255, 255, 255, 0.5);
      box-shadow: 
        0 15px 35px rgba(0, 0, 0, 0.3),
        inset 0 2px 10px rgba(255, 255, 255, 0.5);
    }

    .style-gradient .info {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .style-gradient .style-tag {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    /* СТИЛЬ 3: Неоморфизм */
    .style-neomorphism #app {
      background: #e0e5ec;
    }

    .style-neomorphism .door {
      background: #e0e5ec;
      width: 110px;
      height: 120px;
      border-radius: 20px;
      box-shadow: 
        9px 9px 18px #bebebe,
        -9px -9px 18px #ffffff;
    }

    .style-neomorphism .info {
      color: #4a5568;
    }

    .style-neomorphism .style-tag {
      background: #e0e5ec;
      color: #4a5568;
      box-shadow: 
        6px 6px 12px #bebebe,
        -6px -6px 12px #ffffff;
    }

    .style-neomorphism button {
      background: #e0e5ec;
      color: #4a5568;
      box-shadow: 
        6px 6px 12px #bebebe,
        -6px -6px 12px #ffffff;
    }

    /* СТИЛЬ 4: Минималистичный - с вашим изображением слот-машины */
    .style-minimal #app {
      background: #1a2b45;
      position: relative;
      min-height: 100vh;
      /* Ваше изображение слот-машины */
      background-image: url('./depositphotos_375294772-stock-illustration-slot-machine-game-blue-win.jpg');
      background-size: contain;
      background-position: center center;
      background-repeat: no-repeat;
    }
    
    /* Контейнер для барабанов поверх изображения - точно в прямоугольных окнах */
    .style-minimal .doors {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, calc(-50% + 60px));
      z-index: 15;
      background: transparent;
      padding: 0;
      margin: 0;
      width: fit-content;
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .style-minimal .door {
      background: #ffffff;
      width: 120px;
      height: 140px;
      border-radius: 0;
      border: 3px solid #357abd;
      box-shadow: 
        inset 0 2px 4px rgba(0, 0, 0, 0.1);
      margin: 0;
      overflow: hidden;
      position: relative;
      /* Точное прямоугольное окно как на изображении */
    }
    
    /* Убираем все декоративные элементы, только прямоугольное окно */
    .style-minimal .door::before,
    .style-minimal .door::after {
      display: none;
    }
    
    /* Рычаг в минимальном стиле - скрыт, так как он на фоновом изображении */
    .style-minimal .lever-container {
      display: none;
    }

    .style-minimal .info {
      color: #4a5568;
      position: relative;
      z-index: 10;
      background: rgba(255, 255, 255, 0.9);
      padding: 10px 20px;
      border-radius: 8px;
      border: 2px solid #e2e8f0;
      margin-top: 20px;
    }

    .style-minimal .style-tag {
      background: white;
      color: #4a5568;
      border: 2px solid #e2e8f0;
    }

    .style-minimal button {
      background: white;
      color: #4a5568;
      border: 2px solid #e2e8f0;
    }

    /* СТИЛЬ 5: Неоновый */
    .style-neon #app {
      background: #0a0a0a;
    }

    .style-neon .door {
      background: #1a1a2e;
      width: 110px;
      height: 120px;
      border-radius: 15px;
      border: 2px solid #00f5ff;
      box-shadow: 
        0 0 20px #00f5ff,
        inset 0 0 20px rgba(0, 245, 255, 0.1);
    }

    .style-neon .info {
      color: #00f5ff;
      text-shadow: 0 0 10px #00f5ff;
    }

    .style-neon .style-tag {
      background: #1a1a2e;
      color: #00f5ff;
      border: 2px solid #00f5ff;
      box-shadow: 0 0 15px #00f5ff;
    }

    .style-neon button {
      background: #1a1a2e;
      color: #00f5ff;
      border: 2px solid #00f5ff;
      box-shadow: 0 0 15px #00f5ff;
    }

    .style-neon button:hover {
      box-shadow: 0 0 25px #00f5ff, 0 0 35px #00f5ff;
    }

    .style-neon #spinner {
      border-color: #ff00ff;
      box-shadow: 0 0 15px #ff00ff;
      color: #ff00ff;
    }

    /* СТИЛЬ 6: Glassmorphism (стеклянный) */
    .style-glass #app {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
    }

    .style-glass #app::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.3), transparent 50%);
      animation: glassMove 20s ease-in-out infinite;
    }

    @keyframes glassMove {
      0%, 100% { transform: translate(0, 0); }
      50% { transform: translate(-20px, -20px); }
    }

    .style-glass .door {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      width: 110px;
      height: 120px;
      border-radius: 20px;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .style-glass .info {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .style-glass .style-tag {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
    }

    .style-glass button {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
    }

    /* СТИЛЬ 7: Cyberpunk */
    .style-cyberpunk #app {
      background: #0a0a0a;
      background-image: 
        linear-gradient(0deg, transparent 24%, rgba(0, 255, 255, 0.05) 25%, rgba(0, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, 0.05) 75%, rgba(0, 255, 255, 0.05) 76%, transparent 77%, transparent),
        linear-gradient(90deg, transparent 24%, rgba(0, 255, 255, 0.05) 25%, rgba(0, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, 0.05) 75%, rgba(0, 255, 255, 0.05) 76%, transparent 77%, transparent);
      background-size: 50px 50px;
    }

    .style-cyberpunk .door {
      background: #0a0a0a;
      width: 110px;
      height: 120px;
      border-radius: 10px;
      border: 2px solid #00ff41;
      box-shadow: 
        0 0 20px #00ff41,
        inset 0 0 20px rgba(0, 255, 65, 0.1),
        0 0 40px rgba(0, 255, 65, 0.2);
      position: relative;
    }

    .style-cyberpunk .door::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #00ff41, #00ffff, #ff00ff, #00ff41);
      border-radius: 10px;
      z-index: -1;
      opacity: 0.5;
      animation: cyberBorder 3s linear infinite;
    }

    @keyframes cyberBorder {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    .style-cyberpunk .info {
      color: #00ff41;
      text-shadow: 0 0 10px #00ff41, 0 0 20px #00ff41;
      font-family: 'Orbitron', sans-serif;
    }

    .style-cyberpunk .style-tag {
      background: #0a0a0a;
      color: #00ff41;
      border: 2px solid #00ff41;
      box-shadow: 0 0 15px #00ff41;
      font-family: 'Orbitron', sans-serif;
    }

    .style-cyberpunk button {
      background: #0a0a0a;
      color: #00ff41;
      border: 2px solid #00ff41;
      box-shadow: 0 0 15px #00ff41;
      font-family: 'Orbitron', sans-serif;
    }

    /* СТИЛЬ 8: Retro/Vintage */
    .style-retro #app {
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%);
      background-image: 
        repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,.1) 10px, rgba(0,0,0,.1) 20px);
    }

    .style-retro .door {
      background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 100%);
      width: 110px;
      height: 120px;
      border-radius: 8px;
      border: 4px solid #8B4513;
      box-shadow: 
        inset 0 2px 10px rgba(139, 69, 19, 0.3),
        0 5px 15px rgba(0, 0, 0, 0.4);
      position: relative;
    }

    .style-retro .door::before {
      content: '';
      position: absolute;
      top: 5px;
      left: 5px;
      right: 5px;
      bottom: 5px;
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 4px;
    }

    .style-retro .info {
      color: #f4e4bc;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
    }

    .style-retro .style-tag {
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
      color: #f4e4bc;
      border: 3px solid #654321;
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
    }

    .style-retro button {
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
      color: #f4e4bc;
      border: 3px solid #654321;
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
    }

    /* СТИЛЬ 9: Luxury/Gold */
    .style-luxury #app {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
      position: relative;
    }

    .style-luxury #app::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.1), transparent 50%),
        radial-gradient(circle at 70% 70%, rgba(255, 215, 0, 0.1), transparent 50%);
    }

    .style-luxury .door {
      background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
      width: 120px;
      height: 130px;
      border-radius: 15px;
      border: 3px solid #ffd700;
      box-shadow: 
        0 0 30px rgba(255, 215, 0, 0.5),
        inset 0 0 30px rgba(255, 215, 0, 0.1),
        0 10px 40px rgba(0, 0, 0, 0.6);
      position: relative;
    }

    .style-luxury .door::before {
      content: '';
      position: absolute;
      top: 5px;
      left: 5px;
      right: 5px;
      bottom: 5px;
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 12px;
    }

    .style-luxury .info {
      color: #ffd700;
      text-shadow: 0 0 10px #ffd700, 2px 2px 4px rgba(0, 0, 0, 0.8);
      font-family: 'Cinzel', serif;
    }

    .style-luxury .style-tag {
      background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
      color: #ffd700;
      border: 2px solid #ffd700;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
      font-family: 'Cinzel', serif;
    }

    .style-luxury button {
      background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
      color: #ffd700;
      border: 2px solid #ffd700;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
      font-family: 'Cinzel', serif;
    }

    .style-luxury button:hover {
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    }

    /* СТИЛЬ 10: 3D Realistic */
    .style-3d #app {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #1e3c72 100%);
      perspective: 1000px;
    }

    .style-3d .door {
      background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
      width: 110px;
      height: 120px;
      border-radius: 15px;
      transform: rotateY(-5deg) rotateX(5deg);
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.5),
        inset 0 2px 10px rgba(255, 255, 255, 0.8),
        inset 0 -2px 10px rgba(0, 0, 0, 0.2);
      border: 3px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.3s ease;
    }

    .style-3d .door:nth-child(2) {
      transform: rotateY(0deg) rotateX(0deg);
    }

    .style-3d .door:nth-child(3) {
      transform: rotateY(5deg) rotateX(-5deg);
    }

    .style-3d .door:hover {
      transform: rotateY(0deg) rotateX(0deg) scale(1.05);
    }

    .style-3d .info {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .style-3d .style-tag {
      background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      transform: rotateX(10deg);
    }

    .style-3d button {
      background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      transform: rotateX(5deg);
    }

    /* Win Message */
    .win-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 72px;
      font-weight: 900;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      text-align: center;
      font-family: 'Orbitron', sans-serif;
    }

    /* Уникальные анимации фона для каждого стиля */
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(20px, -20px) rotate(90deg); }
      50% { transform: translate(-20px, 20px) rotate(180deg); }
      75% { transform: translate(20px, 20px) rotate(270deg); }
    }
    
    /* Classic - плавное плавание */
    @keyframes classicFloat {
      0% { transform: translate(0, 0) scale(1); opacity: 0.6; }
      50% { transform: translate(30px, -40px) scale(1.2); opacity: 0.8; }
      100% { transform: translate(0, 0) scale(1); opacity: 0.6; }
    }
    
    /* Gradient - волновое движение */
    @keyframes gradientWave {
      0% { transform: translateX(0) translateY(0) rotate(0deg); }
      33% { transform: translateX(50px) translateY(-30px) rotate(120deg); }
      66% { transform: translateX(-30px) translateY(40px) rotate(240deg); }
      100% { transform: translateX(0) translateY(0) rotate(360deg); }
    }
    
    /* Neomorphism - медленное пульсирование */
    @keyframes neoPulse {
      0%, 100% { transform: scale(1) translate(0, 0); opacity: 0.3; }
      50% { transform: scale(1.5) translate(15px, -15px); opacity: 0.5; }
    }
    
    /* Minimal - вертикальные линии */
    @keyframes minimalLine {
      0% { transform: translateY(-100vh) translateX(0); opacity: 0; }
      50% { opacity: 0.4; }
      100% { transform: translateY(100vh) translateX(0); opacity: 0; }
    }
    
    /* Neon - быстрое мерцание */
    @keyframes neonBlink {
      0%, 100% { opacity: 0.2; transform: scale(1) translate(0, 0); }
      25% { opacity: 1; transform: scale(1.3) translate(10px, -10px); }
      50% { opacity: 0.5; transform: scale(0.8) translate(-10px, 10px); }
      75% { opacity: 0.9; transform: scale(1.2) translate(15px, 15px); }
    }
    
    /* Glass - переливающиеся волны */
    @keyframes glassShimmer {
      0% { transform: translateX(-100%) translateY(0) rotate(0deg); opacity: 0.3; }
      50% { opacity: 0.7; }
      100% { transform: translateX(100vw) translateY(-50px) rotate(180deg); opacity: 0.3; }
    }
    
    /* Cyberpunk - сетка с анимацией */
    @keyframes cyberGrid {
      0% { transform: translate(0, 0) scale(1); opacity: 0.3; }
      25% { transform: translate(20px, 20px) scale(1.1); opacity: 0.6; }
      50% { transform: translate(-20px, 20px) scale(0.9); opacity: 0.4; }
      75% { transform: translate(-20px, -20px) scale(1.05); opacity: 0.7; }
      100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
    }
    
    /* Retro - винтажные паттерны */
    @keyframes retroVintage {
      0% { transform: translate(0, 0) rotate(0deg) scale(1); opacity: 0.4; }
      33% { transform: translate(40px, -30px) rotate(120deg) scale(1.3); opacity: 0.6; }
      66% { transform: translate(-30px, 40px) rotate(240deg) scale(0.8); opacity: 0.5; }
      100% { transform: translate(0, 0) rotate(360deg) scale(1); opacity: 0.4; }
    }
    
    /* Luxury - золотые частицы */
    @keyframes luxurySparkle {
      0% { transform: translate(0, 0) scale(0.5) rotate(0deg); opacity: 0.3; }
      25% { transform: translate(30px, -40px) scale(1.5) rotate(90deg); opacity: 0.9; }
      50% { transform: translate(-40px, 30px) scale(1) rotate(180deg); opacity: 0.6; }
      75% { transform: translate(40px, 40px) scale(1.3) rotate(270deg); opacity: 0.8; }
      100% { transform: translate(0, 0) scale(0.5) rotate(360deg); opacity: 0.3; }
    }
    
    /* 3D - объемные эффекты */
    @keyframes threeDDepth {
      0% { transform: translateZ(0) translate(0, 0) scale(1); opacity: 0.5; }
      33% { transform: translateZ(50px) translate(30px, -30px) scale(1.4); opacity: 0.8; }
      66% { transform: translateZ(-30px) translate(-30px, 30px) scale(0.7); opacity: 0.4; }
      100% { transform: translateZ(0) translate(0, 0) scale(1); opacity: 0.5; }
    }
    
    /* Дополнительные фоновые эффекты */
    .bg-gradient-animated {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      opacity: 0.3;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes neonPulse {
      0%, 100% { box-shadow: 0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor; }
      50% { box-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor; }
    }
    
    @keyframes retroScan {
      0% { transform: translateY(-100%); opacity: 0; }
      50% { opacity: 0.3; }
      100% { transform: translateY(100vh); opacity: 0; }
    }

    /* УЛУЧШЕННЫЕ СТИЛИ - ДОРАБОТКА СУЩЕСТВУЮЩИХ */
    
    /* Классический - добавлены 3D эффекты */
    .style-classic .door {
      transform-style: preserve-3d;
      transition: transform 0.3s ease;
    }
    .style-classic .door:hover {
      transform: translateY(-5px) rotateX(5deg);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }

    /* Градиент - анимация градиента */
    .style-gradient #app {
      background-size: 200% 200%;
      animation: gradientShift 10s ease infinite;
    }
    .style-gradient .door {
      background-size: 200% 200%;
      animation: gradientShift 8s ease infinite;
    }

    /* Неоморфизм - интерактивность */
    .style-neomorphism .door:active {
      box-shadow: 
        inset 9px 9px 18px #bebebe,
        inset -9px -9px 18px #ffffff;
    }

    /* Минимал - тонкие анимации (уже определены выше) */

    /* Неон - усиленное свечение */
    .style-neon .door {
      animation: neonPulse 2s ease-in-out infinite;
    }

    /* Стекло - отражения */
    .style-glass .door::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, transparent 100%);
      border-radius: 20px 20px 0 0;
      pointer-events: none;
    }

    /* Киберпанк - сканирование */
    .style-cyberpunk #app::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, #00ff41, transparent);
      animation: cyberScan 3s linear infinite;
      pointer-events: none;
    }

    /* Ретро - текстуры */
    .style-retro .door {
      background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139,69,19,0.1) 2px, rgba(139,69,19,0.1) 4px);
    }

    /* Люкс - блики */
    @keyframes luxuryShine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(200%) translateY(200%) rotate(45deg); }
    }
    .style-luxury .door::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,215,0,0.3) 50%, transparent 70%);
      animation: luxuryShine 3s infinite;
      pointer-events: none;
    }

    /* 3D - перспектива */
    .style-3d .door {
      transform-style: preserve-3d;
      transition: transform 0.5s ease;
    }
    .style-3d .door:hover {
      transform: rotateY(10deg) rotateX(5deg) translateZ(20px);
    }

    /* НОВЫЕ СТИЛИ 11-20 */

    /* СТИЛЬ 11: Holographic */
    .style-holographic #app {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #667eea 100%);
      background-size: 400% 400%;
      animation: holographicShift 8s ease infinite;
    }
    @keyframes holographicShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .style-holographic .door {
      background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.9) 0%, 
        rgba(118, 75, 162, 0.9) 25%,
        rgba(240, 147, 251, 0.9) 50%,
        rgba(79, 172, 254, 0.9) 75%,
        rgba(102, 126, 234, 0.9) 100%);
      background-size: 200% 200%;
      animation: holographicShift 6s ease infinite;
      width: 115px;
      height: 125px;
      border-radius: 20px;
      border: 2px solid rgba(255, 255, 255, 0.5);
      box-shadow: 
        0 0 30px rgba(102, 126, 234, 0.6),
        inset 0 0 30px rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }
    .style-holographic .door::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
      animation: holographicShine 3s infinite;
    }
    @keyframes holographicShine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    .style-holographic .info {
      color: white;
      text-shadow: 0 0 10px rgba(102, 126, 234, 0.8);
    }
    .style-holographic .style-tag {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      color: white;
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.6);
    }

    /* СТИЛЬ 12: Matrix */
    .style-matrix #app {
      background: #000000;
      position: relative;
      overflow: hidden;
    }
    .style-matrix #app::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        linear-gradient(transparent 50%, rgba(0, 255, 0, 0.03) 50%);
      background-size: 100% 4px;
      animation: matrixRain 20s linear infinite;
    }
    @keyframes matrixRain {
      0% { background-position: 0 0; }
      100% { background-position: 0 100%; }
    }
    
    /* Контейнер для частиц Matrix */
    .matrix-particles-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    
    .matrix-particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: #00ff00;
      border-radius: 50%;
      box-shadow: 0 0 6px #00ff00, 0 0 12px #00ff00;
      opacity: 0;
    }
    
    /* Контролы для Matrix */
    .matrix-controls {
      position: fixed;
      bottom: 80px;
      left: 20px;
      z-index: 1001;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid #00ff00;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
    }
    
    .matrix-controls fieldset {
      border: none;
      margin: 0;
      padding: 0;
    }
    
    .matrix-controls label {
      display: block;
      color: #00ff00;
      font-size: 10px;
      font-family: 'Courier New', monospace;
      margin-bottom: 6px;
      text-shadow: 0 0 5px #00ff00;
    }
    
    .matrix-controls .range {
      width: 120px;
      height: 4px;
      background: rgba(0, 255, 0, 0.2);
      border-radius: 2px;
      outline: none;
      -webkit-appearance: none;
      appearance: none;
    }
    
    .matrix-controls .range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      background: #00ff00;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 8px #00ff00;
    }
    
    .matrix-controls .range::-moz-range-thumb {
      width: 12px;
      height: 12px;
      background: #00ff00;
      border-radius: 50%;
      cursor: pointer;
      border: none;
      box-shadow: 0 0 8px #00ff00;
    }
    
    /* Мерцающий фон для Matrix */
    .style-matrix #app {
      animation: matrixFlicker 3s ease-in-out infinite;
    }
    
    @keyframes matrixFlicker {
      0%, 100% { 
        background: #000000;
        filter: brightness(1);
      }
      25% { 
        background: #000500;
        filter: brightness(1.02);
      }
      50% { 
        background: #000000;
        filter: brightness(1);
      }
      75% { 
        background: #000300;
        filter: brightness(1.01);
      }
    }
    .style-matrix .door {
      background: #000000;
      width: 110px;
      height: 120px;
      border-radius: 10px;
      border: 2px solid #00ff00;
      box-shadow: 
        0 0 20px #00ff00,
        inset 0 0 20px rgba(0, 255, 0, 0.1);
      font-family: 'Courier New', monospace;
      position: relative;
    }
    .style-matrix .door::before {
      content: '010101';
      position: absolute;
      top: 5px;
      left: 5px;
      font-size: 8px;
      color: #00ff00;
      opacity: 0.3;
      animation: matrixFlicker 2s infinite;
    }
    @keyframes matrixFlicker {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.6; }
    }
    .style-matrix .info {
      color: #00ff00;
      text-shadow: 0 0 10px #00ff00;
      font-family: 'Courier New', monospace;
    }
    .style-matrix .style-tag {
      background: #000000;
      color: #00ff00;
      border: 2px solid #00ff00;
      box-shadow: 0 0 15px #00ff00;
      font-family: 'Courier New', monospace;
    }

    /* СТИЛЬ 13: Sunset */
    .style-sunset #app {
      background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 25%, #ffd700 50%, #ff6b6b 100%);
      background-size: 300% 300%;
      animation: sunsetShift 12s ease infinite;
    }
    @keyframes sunsetShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .style-sunset .door {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 248, 220, 0.95) 100%);
      width: 115px;
      height: 125px;
      border-radius: 18px;
      border: 3px solid rgba(255, 107, 107, 0.5);
      box-shadow: 
        0 10px 30px rgba(255, 107, 107, 0.4),
        inset 0 2px 10px rgba(255, 255, 255, 0.5);
    }
    .style-sunset .info {
      color: #fff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    .style-sunset .style-tag {
      background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.5);
    }

    /* СТИЛЬ 14: Ocean */
    .style-ocean #app {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #1e90ff 100%);
      position: relative;
      overflow: hidden;
    }
    @keyframes oceanWave {
      0%, 100% { transform: translateX(0) translateY(0); }
      25% { transform: translateX(-20px) translateY(-10px); }
      50% { transform: translateX(0) translateY(-20px); }
      75% { transform: translateX(20px) translateY(-10px); }
    }
    .style-ocean #app::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 30% 30%, rgba(30, 144, 255, 0.3), transparent 50%),
        radial-gradient(circle at 70% 70%, rgba(30, 90, 255, 0.3), transparent 50%);
      animation: oceanWave 10s ease-in-out infinite;
    }
    .style-ocean .door {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(230, 240, 255, 0.9) 100%);
      width: 115px;
      height: 125px;
      border-radius: 20px;
      border: 3px solid rgba(30, 144, 255, 0.5);
      box-shadow: 
        0 10px 30px rgba(30, 144, 255, 0.4),
        inset 0 2px 10px rgba(255, 255, 255, 0.5);
    }
    .style-ocean .info {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    .style-ocean .style-tag {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(30, 144, 255, 0.5);
    }

    /* СТИЛЬ 15: Fire */
    .style-fire #app {
      background: linear-gradient(135deg, #1a0000 0%, #4a0000 25%, #8b0000 50%, #ff4500 75%, #ff8c00 100%);
      background-size: 400% 400%;
      animation: fireShift 6s ease infinite;
    }
    @keyframes fireShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .style-fire .door {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 240, 220, 0.95) 100%);
      width: 115px;
      height: 125px;
      border-radius: 18px;
      border: 3px solid #ff4500;
      box-shadow: 
        0 0 30px #ff4500,
        0 10px 30px rgba(255, 69, 0, 0.5),
        inset 0 2px 10px rgba(255, 255, 255, 0.5);
      position: relative;
    }
    .style-fire .door::before {
      content: '';
      position: absolute;
      top: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 10px;
      background: linear-gradient(180deg, #ff4500, transparent);
      border-radius: 50%;
      filter: blur(5px);
      animation: fireFlicker 1s ease-in-out infinite;
    }
    @keyframes fireFlicker {
      0%, 100% { opacity: 0.6; transform: translateX(-50%) scaleX(1); }
      50% { opacity: 1; transform: translateX(-50%) scaleX(1.2); }
    }
    .style-fire .info {
      color: #fff;
      text-shadow: 0 0 10px #ff4500, 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    .style-fire .style-tag {
      background: linear-gradient(135deg, #8b0000 0%, #ff4500 100%);
      color: white;
      box-shadow: 0 0 20px #ff4500;
    }

    /* СТИЛЬ 16: Space */
    .style-space #app {
      background: #000000;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.3), transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(75, 0, 130, 0.3), transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(25, 25, 112, 0.2), transparent 70%);
    }
    .style-space .door {
      background: linear-gradient(135deg, rgba(138, 43, 226, 0.3) 0%, rgba(75, 0, 130, 0.3) 100%);
      backdrop-filter: blur(10px);
      width: 115px;
      height: 125px;
      border-radius: 20px;
      border: 2px solid rgba(138, 43, 226, 0.6);
      box-shadow: 
        0 0 30px rgba(138, 43, 226, 0.6),
        inset 0 0 30px rgba(138, 43, 226, 0.2);
      position: relative;
    }
    .style-space .door::before {
      content: '✦';
      position: absolute;
      top: 10px;
      left: 10px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 12px;
      animation: starTwinkle 2s infinite;
    }
    @keyframes starTwinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    .style-space .info {
      color: #8a2be2;
      text-shadow: 0 0 10px #8a2be2;
    }
    .style-space .style-tag {
      background: rgba(138, 43, 226, 0.3);
      backdrop-filter: blur(10px);
      color: #8a2be2;
      border: 2px solid rgba(138, 43, 226, 0.6);
      box-shadow: 0 0 20px rgba(138, 43, 226, 0.6);
    }

    /* СТИЛЬ 17: Forest */
    .style-forest #app {
      background: linear-gradient(135deg, #1a4d2e 0%, #2d5f3f 25%, #3d7a4f 50%, #4a9d5f 100%);
      background-size: 300% 300%;
      animation: forestShift 15s ease infinite;
    }
    @keyframes forestShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .style-forest .door {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 255, 240, 0.95) 100%);
      width: 115px;
      height: 125px;
      border-radius: 18px;
      border: 3px solid #2d5f3f;
      box-shadow: 
        0 10px 30px rgba(45, 95, 63, 0.4),
        inset 0 2px 10px rgba(255, 255, 255, 0.5);
      position: relative;
    }
    .style-forest .door::after {
      content: '🌿';
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 16px;
      opacity: 0.5;
    }
    .style-forest .info {
      color: #fff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    .style-forest .style-tag {
      background: linear-gradient(135deg, #1a4d2e 0%, #2d5f3f 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(45, 95, 63, 0.5);
    }

    /* СТИЛЬ 18: Candy */
    .style-candy #app {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 25%, #fecfef 50%, #ffc3a0 75%, #ff9a9e 100%);
      background-size: 400% 400%;
      animation: candyShift 10s ease infinite;
    }
    @keyframes candyShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .style-candy .door {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 240, 245, 0.95) 100%);
      width: 120px;
      height: 130px;
      border-radius: 25px;
      border: 4px solid #ff9a9e;
      box-shadow: 
        0 15px 35px rgba(255, 154, 158, 0.4),
        inset 0 2px 10px rgba(255, 255, 255, 0.6);
      position: relative;
    }
    .style-candy .door::before {
      content: '🍬';
      position: absolute;
      top: 5px;
      left: 5px;
      font-size: 20px;
      opacity: 0.6;
      animation: candyBounce 2s infinite;
    }
    @keyframes candyBounce {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-5px) rotate(10deg); }
    }
    .style-candy .info {
      color: #ff69b4;
      text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
    }
    .style-candy .style-tag {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(255, 154, 158, 0.5);
    }

    /* СТИЛЬ 19: Dark Mode */
    .style-dark #app {
      background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #0f0f0f 100%);
    }
    .style-dark .door {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      width: 110px;
      height: 120px;
      border-radius: 15px;
      border: 2px solid #333333;
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.8),
        inset 0 2px 10px rgba(255, 255, 255, 0.05);
    }
    .style-dark .info {
      color: #cccccc;
    }
    .style-dark .style-tag {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      color: #cccccc;
      border: 2px solid #333333;
    }

    /* СТИЛЬ 20: Rainbow */
    .style-rainbow #app {
      background: linear-gradient(135deg, 
        #ff0000 0%, 
        #ff7f00 14.28%, 
        #ffff00 28.56%, 
        #00ff00 42.84%, 
        #0000ff 57.12%, 
        #4b0082 71.4%, 
        #9400d3 85.68%, 
        #ff0000 100%);
      background-size: 400% 400%;
      animation: rainbowShift 8s linear infinite;
    }
    @keyframes rainbowShift {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }
    .style-rainbow .door {
      background: rgba(255, 255, 255, 0.95);
      width: 115px;
      height: 125px;
      border-radius: 20px;
      border: 4px solid;
      border-image: linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, #ff0000) 1;
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.3),
        inset 0 2px 10px rgba(255, 255, 255, 0.5);
      animation: rainbowBorder 3s linear infinite;
    }
    @keyframes rainbowBorder {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }
    .style-rainbow .info {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    .style-rainbow .style-tag {
      background: linear-gradient(135deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
      color: white;
      animation: rainbowShift 8s linear infinite;
    }
  </style>
</head>
<body class="style-classic">
  <canvas id="canvas-3d"></canvas>
  <div class="particles" id="particles"></div>
  <div class="matrix-particles-container" id="matrixParticles"></div>
  
  <div class="style-tag" id="styleTag">
    <i class="fas fa-circle"></i> Классический
  </div>
  
  <!-- Кнопка переключения меню (три полоски) -->
  <div class="menu-toggle" id="menuToggle">
    <span></span>
    <span></span>
    <span></span>
  </div>
  
  <div class="style-switcher" id="styleSwitcher">
    <button class="style-btn active" data-style="classic" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
      <i class="fas fa-circle"></i> Классический
    </button>
    <button class="style-btn" data-style="gradient" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
      <i class="fas fa-paint-brush"></i> Градиент
    </button>
    <button class="style-btn" data-style="neomorphism" style="background: #e0e5ec; color: #4a5568; box-shadow: 6px 6px 12px #bebebe, -6px -6px 12px #ffffff;">
      <i class="fas fa-cube"></i> Неоморфизм
    </button>
    <button class="style-btn" data-style="minimal" style="background: white; color: #4a5568; border: 2px solid #e2e8f0;">
      <i class="fas fa-minus"></i> Минимал
    </button>
    <button class="style-btn" data-style="neon" style="background: #1a1a2e; color: #00f5ff; border: 2px solid #00f5ff; box-shadow: 0 0 15px #00f5ff;">
      <i class="fas fa-lightbulb"></i> Неон
    </button>
    <button class="style-btn" data-style="glass" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); color: white;">
      <i class="fas fa-wine-glass"></i> Стекло
    </button>
    <button class="style-btn" data-style="cyberpunk" style="background: #0a0a0a; color: #00ff41; border: 2px solid #00ff41; box-shadow: 0 0 15px #00ff41;">
      <i class="fas fa-terminal"></i> Киберпанк
    </button>
    <button class="style-btn" data-style="retro" style="background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: #f4e4bc; border: 3px solid #654321;">
      <i class="fas fa-gamepad"></i> Ретро
    </button>
    <button class="style-btn" data-style="luxury" style="background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%); color: #ffd700; border: 2px solid #ffd700; box-shadow: 0 0 20px rgba(255,215,0,0.5);">
      <i class="fas fa-crown"></i> Люкс
    </button>
    <button class="style-btn" data-style="3d" style="background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%); color: white; border: 2px solid rgba(255,255,255,0.3);">
      <i class="fas fa-cube"></i> 3D
    </button>
    <button class="style-btn" data-style="holographic" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); color: white; box-shadow: 0 0 20px rgba(102, 126, 234, 0.6);">
      <i class="fas fa-sparkles"></i> Голограмма
    </button>
    <button class="style-btn" data-style="matrix" style="background: #000000; color: #00ff00; border: 2px solid #00ff00; box-shadow: 0 0 15px #00ff00; font-family: 'Courier New', monospace;">
      <i class="fas fa-terminal"></i> Матрица
    </button>
    <button class="style-btn" data-style="sunset" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%); color: white; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.5);">
      <i class="fas fa-sun"></i> Закат
    </button>
    <button class="style-btn" data-style="ocean" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; box-shadow: 0 4px 15px rgba(30, 144, 255, 0.5);">
      <i class="fas fa-water"></i> Океан
    </button>
    <button class="style-btn" data-style="fire" style="background: linear-gradient(135deg, #8b0000 0%, #ff4500 100%); color: white; box-shadow: 0 0 20px #ff4500;">
      <i class="fas fa-fire"></i> Огонь
    </button>
    <button class="style-btn" data-style="space" style="background: rgba(138, 43, 226, 0.3); backdrop-filter: blur(10px); color: #8a2be2; border: 2px solid rgba(138, 43, 226, 0.6); box-shadow: 0 0 20px rgba(138, 43, 226, 0.6);">
      <i class="fas fa-star"></i> Космос
    </button>
    <button class="style-btn" data-style="forest" style="background: linear-gradient(135deg, #1a4d2e 0%, #2d5f3f 100%); color: white; box-shadow: 0 4px 15px rgba(45, 95, 63, 0.5);">
      <i class="fas fa-tree"></i> Лес
    </button>
    <button class="style-btn" data-style="candy" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color: white; box-shadow: 0 4px 15px rgba(255, 154, 158, 0.5);">
      <i class="fas fa-candy-cane"></i> Конфеты
    </button>
    <button class="style-btn" data-style="dark" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); color: #cccccc; border: 2px solid #333333;">
      <i class="fas fa-moon"></i> Темный
    </button>
    <button class="style-btn" data-style="rainbow" style="background: linear-gradient(135deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3); color: white;">
      <i class="fas fa-rainbow"></i> Радуга
    </button>
  </div>

    <!-- Слот-машина -->
    <div id="app" class="game-container">
      <div class="doors">
        <div class="door slot1">
          <div class="boxes"></div>
        </div>
        <div class="door slot2">
          <div class="boxes"></div>
        </div>
        <div class="door slot3">
          <div class="boxes"></div>
        </div>
        <div class="lever-container">
          <div class="lever-base"></div>
          <div class="lever" id="lever"></div>
        </div>
      </div>
      <div class="info">
        <i class="fas fa-info-circle"></i> Потяните рычаг чтобы запустить слот-машину
      </div>
    </div>

  <!-- Контролы для Matrix стиля -->
  <div class="matrix-controls" id="matrixControls" style="display: none;">
    <fieldset class="controls">
      <label for="matrixPrecision">Precision:</label>
      <input type="range" id="matrixPrecision" min="0" max="5" value="4" step="1" class="range" />
    </fieldset>
  </div>

  <div class="win-message" id="winMessage">JACKPOT!</div>

  <script>
    (function () {
      const items = [
        '🍭',
        '❌',
        '⛄️',
        '🦄',
        '🍌',
        '💩',
        '👻',
        '😻',
        '💵',
        '🤡',    
        '🦖',
        '🍎',
        '😂',
        '🖕',
      ];

      const styleNames = {
        classic: { name: 'Классический', icon: 'fa-circle' },
        gradient: { name: 'Градиент', icon: 'fa-paint-brush' },
        neomorphism: { name: 'Неоморфизм', icon: 'fa-cube' },
        minimal: { name: 'Минимал', icon: 'fa-minus' },
        neon: { name: 'Неон', icon: 'fa-lightbulb' },
        glass: { name: 'Стекло', icon: 'fa-wine-glass' },
        cyberpunk: { name: 'Киберпанк', icon: 'fa-terminal' },
        retro: { name: 'Ретро', icon: 'fa-gamepad' },
        luxury: { name: 'Люкс', icon: 'fa-crown' },
        '3d': { name: '3D', icon: 'fa-cube' },
        holographic: { name: 'Голограмма', icon: 'fa-sparkles' },
        matrix: { name: 'Матрица', icon: 'fa-terminal' },
        sunset: { name: 'Закат', icon: 'fa-sun' },
        ocean: { name: 'Океан', icon: 'fa-water' },
        fire: { name: 'Огонь', icon: 'fa-fire' },
        space: { name: 'Космос', icon: 'fa-star' },
        forest: { name: 'Лес', icon: 'fa-tree' },
        candy: { name: 'Конфеты', icon: 'fa-candy-cane' },
        dark: { name: 'Темный', icon: 'fa-moon' },
        rainbow: { name: 'Радуга', icon: 'fa-rainbow' }
      };

      const doors = document.querySelectorAll('.door');
      const body = document.body;
      const styleTag = document.querySelector('#styleTag');
      const styleButtons = document.querySelectorAll('.style-btn');
      const winMessage = document.querySelector('#winMessage');
      const particlesContainer = document.querySelector('#particles');
      const lever = document.querySelector('#lever');
      const infoMessage = document.querySelector('.info');
      const menuToggle = document.querySelector('#menuToggle');
      const styleSwitcher = document.querySelector('#styleSwitcher');
      
      // Переключение видимости меню стилей
      if (menuToggle && styleSwitcher) {
        menuToggle.addEventListener('click', () => {
          menuToggle.classList.toggle('active');
          styleSwitcher.classList.toggle('hidden');
        });
      }
      
      // Рычаг запускает вращение
      if (lever) {
        lever.addEventListener('click', spin);
      }

      // Звуковые эффекты (Web Audio API)
      let audioContext = null;
      
      function initAudio() {
        if (!audioContext) {
          audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioContext.state === 'suspended') {
          audioContext.resume();
        }
      }
      
      function playSound(frequency, duration, type = 'sine', volume = 0.3) {
        initAudio();
        if (!audioContext) return;
        
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = frequency;
        oscillator.type = type;
        
        gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + duration);
      }

      // Звуки для разных стилей - каждый стиль имеет уникальные звуки
      const styleSounds = {
        classic: {
          start: () => {
            playSound(200, 0.2, 'sine', 0.3);
            setTimeout(() => playSound(250, 0.15, 'sine', 0.25), 50);
          },
          spin: () => playSound(300, 0.15, 'sine', 0.2),
          win: () => {
            playSound(523, 0.2, 'sine', 0.3);
            setTimeout(() => playSound(659, 0.2, 'sine', 0.3), 100);
            setTimeout(() => playSound(784, 0.3, 'sine', 0.3), 200);
          }
        },
        gradient: {
          start: () => {
            playSound(350, 0.18, 'triangle', 0.3);
            setTimeout(() => playSound(400, 0.15, 'triangle', 0.28), 60);
          },
          spin: () => playSound(400, 0.12, 'triangle', 0.25),
          win: () => {
            playSound(440, 0.15, 'triangle', 0.3);
            setTimeout(() => playSound(554, 0.15, 'triangle', 0.3), 80);
            setTimeout(() => playSound(659, 0.15, 'triangle', 0.3), 160);
            setTimeout(() => playSound(784, 0.2, 'triangle', 0.3), 240);
          }
        },
        neomorphism: {
          start: () => {
            playSound(180, 0.2, 'sine', 0.2);
            setTimeout(() => playSound(220, 0.18, 'sine', 0.18), 80);
          },
          spin: () => playSound(250, 0.18, 'sine', 0.15),
          win: () => {
            playSound(392, 0.2, 'sine', 0.25);
            setTimeout(() => playSound(494, 0.2, 'sine', 0.25), 120);
            setTimeout(() => playSound(587, 0.25, 'sine', 0.25), 240);
          }
        },
        minimal: {
          start: () => {
            playSound(300, 0.15, 'sine', 0.18);
          },
          spin: () => playSound(350, 0.1, 'sine', 0.15),
          win: () => {
            playSound(523, 0.15, 'sine', 0.2);
            setTimeout(() => playSound(659, 0.15, 'sine', 0.2), 100);
          }
        },
        neon: {
          start: () => {
            playSound(500, 0.15, 'sawtooth', 0.35);
            setTimeout(() => playSound(600, 0.12, 'sawtooth', 0.33), 40);
          },
          spin: () => playSound(600, 0.1, 'sawtooth', 0.3),
          win: () => {
            playSound(800, 0.2, 'sawtooth', 0.4);
            setTimeout(() => playSound(1000, 0.2, 'sawtooth', 0.4), 100);
            setTimeout(() => playSound(1200, 0.3, 'sawtooth', 0.4), 200);
          }
        },
        glass: {
          start: () => {
            playSound(400, 0.16, 'sine', 0.25);
            setTimeout(() => playSound(450, 0.14, 'sine', 0.23), 70);
          },
          spin: () => playSound(450, 0.13, 'sine', 0.2),
          win: () => {
            playSound(523, 0.18, 'sine', 0.3);
            setTimeout(() => playSound(659, 0.18, 'sine', 0.3), 90);
            setTimeout(() => playSound(784, 0.25, 'sine', 0.3), 180);
            setTimeout(() => playSound(988, 0.2, 'sine', 0.3), 270);
          }
        },
        cyberpunk: {
          start: () => {
            playSound(150, 0.1, 'square', 0.4);
            setTimeout(() => playSound(180, 0.09, 'square', 0.38), 30);
            setTimeout(() => playSound(200, 0.08, 'square', 0.36), 60);
          },
          spin: () => playSound(200, 0.08, 'square', 0.35),
          win: () => {
            playSound(150, 0.1, 'square', 0.4);
            setTimeout(() => playSound(200, 0.1, 'square', 0.4), 80);
            setTimeout(() => playSound(250, 0.1, 'square', 0.4), 160);
            setTimeout(() => playSound(300, 0.15, 'square', 0.4), 240);
          }
        },
        retro: {
          start: () => {
            playSound(200, 0.22, 'square', 0.32);
            setTimeout(() => playSound(220, 0.2, 'square', 0.3), 100);
          },
          spin: () => playSound(220, 0.2, 'square', 0.3),
          win: () => {
            playSound(262, 0.15, 'square', 0.35);
            setTimeout(() => playSound(330, 0.15, 'square', 0.35), 100);
            setTimeout(() => playSound(392, 0.15, 'square', 0.35), 200);
            setTimeout(() => playSound(494, 0.2, 'square', 0.35), 300);
          }
        },
        luxury: {
          start: () => {
            playSound(300, 0.2, 'sine', 0.28);
            setTimeout(() => playSound(330, 0.18, 'sine', 0.26), 80);
            setTimeout(() => playSound(370, 0.16, 'sine', 0.24), 160);
          },
          spin: () => playSound(330, 0.16, 'sine', 0.25),
          win: () => {
            playSound(523, 0.2, 'sine', 0.35);
            setTimeout(() => playSound(659, 0.2, 'sine', 0.35), 100);
            setTimeout(() => playSound(784, 0.2, 'sine', 0.35), 200);
            setTimeout(() => playSound(988, 0.2, 'sine', 0.35), 300);
            setTimeout(() => playSound(1175, 0.3, 'sine', 0.35), 400);
          }
        },
        '3d': {
          start: () => {
            playSound(350, 0.17, 'triangle', 0.24);
            setTimeout(() => playSound(380, 0.15, 'triangle', 0.22), 60);
          },
          spin: () => playSound(380, 0.14, 'triangle', 0.22),
          win: () => {
            playSound(523, 0.18, 'triangle', 0.3);
            setTimeout(() => playSound(659, 0.18, 'triangle', 0.3), 90);
            setTimeout(() => playSound(784, 0.22, 'triangle', 0.3), 180);
          }
        },
        holographic: {
          start: () => {
            playSound(440, 0.18, 'sine', 0.3);
            setTimeout(() => playSound(523, 0.16, 'sine', 0.28), 60);
            setTimeout(() => playSound(659, 0.14, 'sine', 0.26), 120);
          },
          spin: () => playSound(500, 0.12, 'sine', 0.25),
          win: () => {
            playSound(523, 0.2, 'sine', 0.35);
            setTimeout(() => playSound(659, 0.2, 'sine', 0.35), 80);
            setTimeout(() => playSound(784, 0.2, 'sine', 0.35), 160);
            setTimeout(() => playSound(988, 0.25, 'sine', 0.35), 240);
          }
        },
        matrix: {
          start: () => {
            playSound(100, 0.1, 'square', 0.4);
            setTimeout(() => playSound(150, 0.1, 'square', 0.38), 50);
            setTimeout(() => playSound(200, 0.1, 'square', 0.36), 100);
          },
          spin: () => playSound(150, 0.08, 'square', 0.35),
          win: () => {
            playSound(200, 0.12, 'square', 0.4);
            setTimeout(() => playSound(250, 0.12, 'square', 0.4), 100);
            setTimeout(() => playSound(300, 0.12, 'square', 0.4), 200);
            setTimeout(() => playSound(350, 0.15, 'square', 0.4), 300);
          }
        },
        sunset: {
          start: () => {
            playSound(300, 0.2, 'sine', 0.3);
            setTimeout(() => playSound(350, 0.18, 'sine', 0.28), 80);
          },
          spin: () => playSound(330, 0.15, 'sine', 0.25),
          win: () => {
            playSound(440, 0.2, 'sine', 0.35);
            setTimeout(() => playSound(554, 0.2, 'sine', 0.35), 100);
            setTimeout(() => playSound(659, 0.25, 'sine', 0.35), 200);
          }
        },
        ocean: {
          start: () => {
            playSound(220, 0.25, 'sine', 0.25);
            setTimeout(() => playSound(247, 0.2, 'sine', 0.23), 100);
          },
          spin: () => playSound(262, 0.18, 'sine', 0.22),
          win: () => {
            playSound(330, 0.2, 'sine', 0.3);
            setTimeout(() => playSound(392, 0.2, 'sine', 0.3), 120);
            setTimeout(() => playSound(494, 0.25, 'sine', 0.3), 240);
          }
        },
        fire: {
          start: () => {
            playSound(180, 0.15, 'sawtooth', 0.35);
            setTimeout(() => playSound(220, 0.15, 'sawtooth', 0.33), 60);
            setTimeout(() => playSound(260, 0.15, 'sawtooth', 0.31), 120);
          },
          spin: () => playSound(200, 0.12, 'sawtooth', 0.3),
          win: () => {
            playSound(300, 0.2, 'sawtooth', 0.4);
            setTimeout(() => playSound(400, 0.2, 'sawtooth', 0.4), 100);
            setTimeout(() => playSound(500, 0.25, 'sawtooth', 0.4), 200);
          }
        },
        space: {
          start: () => {
            playSound(200, 0.2, 'sine', 0.2);
            setTimeout(() => playSound(250, 0.18, 'sine', 0.18), 100);
            setTimeout(() => playSound(300, 0.16, 'sine', 0.16), 200);
          },
          spin: () => playSound(280, 0.15, 'sine', 0.2),
          win: () => {
            playSound(392, 0.2, 'sine', 0.3);
            setTimeout(() => playSound(494, 0.2, 'sine', 0.3), 100);
            setTimeout(() => playSound(587, 0.2, 'sine', 0.3), 200);
            setTimeout(() => playSound(698, 0.25, 'sine', 0.3), 300);
          }
        },
        forest: {
          start: () => {
            playSound(165, 0.22, 'sine', 0.25);
            setTimeout(() => playSound(196, 0.2, 'sine', 0.23), 120);
          },
          spin: () => playSound(185, 0.18, 'sine', 0.22),
          win: () => {
            playSound(262, 0.2, 'sine', 0.3);
            setTimeout(() => playSound(330, 0.2, 'sine', 0.3), 100);
            setTimeout(() => playSound(392, 0.25, 'sine', 0.3), 200);
          }
        },
        candy: {
          start: () => {
            playSound(400, 0.16, 'triangle', 0.3);
            setTimeout(() => playSound(450, 0.14, 'triangle', 0.28), 60);
            setTimeout(() => playSound(500, 0.12, 'triangle', 0.26), 120);
          },
          spin: () => playSound(440, 0.12, 'triangle', 0.25),
          win: () => {
            playSound(523, 0.18, 'triangle', 0.35);
            setTimeout(() => playSound(659, 0.18, 'triangle', 0.35), 80);
            setTimeout(() => playSound(784, 0.18, 'triangle', 0.35), 160);
            setTimeout(() => playSound(988, 0.2, 'triangle', 0.35), 240);
          }
        },
        dark: {
          start: () => {
            playSound(150, 0.2, 'sine', 0.2);
            setTimeout(() => playSound(180, 0.18, 'sine', 0.18), 100);
          },
          spin: () => playSound(170, 0.16, 'sine', 0.18),
          win: () => {
            playSound(220, 0.2, 'sine', 0.25);
            setTimeout(() => playSound(277, 0.2, 'sine', 0.25), 120);
            setTimeout(() => playSound(330, 0.25, 'sine', 0.25), 240);
          }
        },
        rainbow: {
          start: () => {
            playSound(262, 0.15, 'sine', 0.3);
            setTimeout(() => playSound(330, 0.15, 'sine', 0.28), 50);
            setTimeout(() => playSound(392, 0.15, 'sine', 0.26), 100);
            setTimeout(() => playSound(494, 0.15, 'sine', 0.24), 150);
          },
          spin: () => {
            const notes = [262, 294, 330, 349, 392, 440, 494];
            const note = notes[Math.floor(Math.random() * notes.length)];
            playSound(note, 0.1, 'sine', 0.25);
          },
          win: () => {
            playSound(523, 0.2, 'sine', 0.35);
            setTimeout(() => playSound(659, 0.2, 'sine', 0.35), 80);
            setTimeout(() => playSound(784, 0.2, 'sine', 0.35), 160);
            setTimeout(() => playSound(988, 0.2, 'sine', 0.35), 240);
            setTimeout(() => playSound(1175, 0.25, 'sine', 0.35), 320);
          }
        }
      };

      function getCurrentStyleSounds() {
        const currentStyle = body.className.match(/style-(\w+)/)?.[1] || 'classic';
        return styleSounds[currentStyle] || styleSounds.classic;
      }

      // Частицы фона с уникальными анимациями для каждого стиля
      function createParticles() {
        particlesContainer.innerHTML = '';
        
        const matrixContainer = document.querySelector('#matrixParticles');
        if (matrixContainer) {
          matrixContainer.innerHTML = '';
        }
        
        const currentStyle = body.className.match(/style-(\w+)/)?.[1] || 'classic';
        
        // Удаляем старые фоновые градиенты
        const oldGradients = document.querySelectorAll('.bg-gradient-animated');
        oldGradients.forEach(el => el.remove());
        
        switch(currentStyle) {
          case 'classic':
            createClassicParticles();
            break;
          case 'gradient':
            createGradientParticles();
            break;
          case 'neomorphism':
            createNeomorphismParticles();
            break;
          case 'minimal':
            createMinimalParticles();
            break;
          case 'neon':
            createNeonParticles();
            break;
          case 'glass':
            createGlassParticles();
            break;
          case 'cyberpunk':
            createCyberpunkParticles();
            break;
          case 'matrix':
            createMatrixParticles();
            break;
          case 'retro':
            createRetroParticles();
            break;
          case 'luxury':
            createLuxuryParticles();
            break;
          case '3d':
            create3DParticles();
            break;
          default:
            createClassicParticles();
        }
      }
      
      function createClassicParticles() {
        for (let i = 0; i < 40; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 5 + 3;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#667eea';
          particle.style.borderRadius = '50%';
          particle.style.animation = `classicFloat ${Math.random() * 8 + 12}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 5 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createGradientParticles() {
        // Добавляем анимированный градиент
        const gradient = document.createElement('div');
        gradient.className = 'bg-gradient-animated';
        gradient.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 50%, #4facfe 100%)';
        gradient.style.backgroundSize = '200% 200%';
        gradient.style.animation = 'gradientShift 8s ease infinite';
        document.body.appendChild(gradient);
        
        for (let i = 0; i < 50; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 6 + 2;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = `hsl(${Math.random() * 60 + 300}, 70%, 60%)`;
          particle.style.borderRadius = '50%';
          particle.style.animation = `gradientWave ${Math.random() * 6 + 8}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 3 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createNeomorphismParticles() {
        for (let i = 0; i < 30; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 8 + 4;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#bebebe';
          particle.style.borderRadius = '50%';
          particle.style.boxShadow = '6px 6px 12px #bebebe, -6px -6px 12px #ffffff';
          particle.style.animation = `neoPulse ${Math.random() * 10 + 15}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 5 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createMinimalParticles() {
        for (let i = 0; i < 20; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.width = '2px';
          particle.style.height = Math.random() * 100 + 50 + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = '-100px';
          particle.style.background = '#e2e8f0';
          particle.style.animation = `minimalLine ${Math.random() * 3 + 4}s infinite linear`;
          particle.style.animationDelay = Math.random() * 2 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createNeonParticles() {
        for (let i = 0; i < 60; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 4 + 2;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#00f5ff';
          particle.style.borderRadius = '50%';
          particle.style.animation = `neonBlink ${Math.random() * 0.5 + 0.3}s infinite ease-in-out, neonPulse 2s infinite`;
          particle.style.animationDelay = Math.random() * 0.5 + 's';
          particle.style.color = '#00f5ff';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createGlassParticles() {
        // Добавляем переливающийся градиент
        const gradient = document.createElement('div');
        gradient.className = 'bg-gradient-animated';
        gradient.style.background = 'linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.1) 100%)';
        gradient.style.backgroundSize = '200% 200%';
        gradient.style.animation = 'gradientShift 10s ease infinite';
        document.body.appendChild(gradient);
        
        for (let i = 0; i < 40; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 8 + 4;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = '-100px';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = 'rgba(255,255,255,0.3)';
          particle.style.borderRadius = '50%';
          particle.style.backdropFilter = 'blur(5px)';
          particle.style.animation = `glassShimmer ${Math.random() * 5 + 8}s infinite linear`;
          particle.style.animationDelay = Math.random() * 3 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createCyberpunkParticles() {
        // Добавляем сетку
        for (let i = 0; i < 80; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 3 + 1;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#00ff41';
          particle.style.borderRadius = '0';
          particle.style.boxShadow = '0 0 5px #00ff41, 0 0 10px #00ff41';
          particle.style.animation = `cyberGrid ${Math.random() * 4 + 6}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 2 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      // Переменная для precision Matrix анимации
      let matrixPrecision = 4;
      let matrixAnimations = [];
      
      function createMatrixParticles() {
        const matrixContainer = document.querySelector('#matrixParticles');
        if (!matrixContainer || typeof anime === 'undefined') {
          return;
        }
        
        // Останавливаем предыдущие анимации
        matrixAnimations.forEach(anim => anim.pause());
        matrixAnimations = [];
        matrixContainer.innerHTML = '';
        
        // Функция для округления с precision
        function roundWithPrecision(value) {
          const multiplier = Math.pow(10, matrixPrecision);
          return Math.round(value * multiplier) / multiplier;
        }
        
        // Создаем 150 частиц с анимацией через anime.js
        for (let i = 0; i < 150; i++) {
          const particle = document.createElement('div');
          particle.classList.add('matrix-particle');
          
          // Случайная позиция
          const x = roundWithPrecision(anime.random(-10, 10));
          const y = roundWithPrecision(anime.random(-3, 3));
          
          particle.style.left = '50%';
          particle.style.top = '50%';
          particle.style.transform = `translate(${x}rem, ${y}rem)`;
          
          matrixContainer.appendChild(particle);
          
          // Случайные значения для анимации
          const targetX = roundWithPrecision(anime.random(-10, 10));
          const targetY = roundWithPrecision(anime.random(-3, 3));
          const scaleDuration = anime.random(500, 1500);
          const opacityValue = roundWithPrecision(anime.random(0.5, 1));
          const delay = anime.random(0, 1000);
          const totalDuration = anime.random(2000, 4000);
          
          // Анимация с anime.js
          const anim = anime({
            targets: particle,
            x: targetX + 'rem',
            y: targetY + 'rem',
            scale: [
              { value: 0, duration: 0 },
              { value: 1, duration: scaleDuration },
              { value: 0, duration: scaleDuration }
            ],
            opacity: [
              { value: 0, duration: 0 },
              { value: opacityValue, duration: scaleDuration },
              { value: 0, duration: scaleDuration }
            ],
            delay: delay,
            loop: true,
            easing: 'easeInOutQuad',
            duration: totalDuration,
            update: function(anim) {
              // Обновляем значения с учетом precision при каждом кадре
              const currentX = roundWithPrecision(parseFloat(particle.style.transform.match(/translate\(([^,]+)/)?.[1] || 0));
              const currentY = roundWithPrecision(parseFloat(particle.style.transform.match(/translate\([^,]+,([^)]+)/)?.[1] || 0));
              particle.style.transform = `translate(${currentX}rem, ${currentY}rem)`;
            }
          });
          
          matrixAnimations.push(anim);
        }
      }
      
      // Обработчик для ползунка precision
      const matrixPrecisionInput = document.querySelector('#matrixPrecision');
      const matrixControls = document.querySelector('#matrixControls');
      
      if (matrixPrecisionInput) {
        matrixPrecisionInput.addEventListener('input', function() {
          matrixPrecision = parseInt(this.value);
          // Пересоздаем частицы с новым precision
          const currentStyle = body.className.match(/style-(\w+)/)?.[1] || 'classic';
          if (currentStyle === 'matrix') {
            createMatrixParticles();
          }
        });
      }
      
      function createRetroParticles() {
        // Добавляем сканирующие линии
        for (let i = 0; i < 5; i++) {
          const line = document.createElement('div');
          line.className = 'particle';
          line.style.width = '100%';
          line.style.height = '2px';
          line.style.left = '0';
          line.style.top = '-2px';
          line.style.background = 'linear-gradient(90deg, transparent, rgba(244,228,188,0.5), transparent)';
          line.style.animation = `retroScan ${Math.random() * 2 + 3}s infinite linear`;
          line.style.animationDelay = Math.random() * 2 + 's';
          particlesContainer.appendChild(line);
        }
        
        for (let i = 0; i < 35; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 6 + 3;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#f4e4bc';
          particle.style.borderRadius = '50%';
          particle.style.animation = `retroVintage ${Math.random() * 10 + 12}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 5 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function createLuxuryParticles() {
        for (let i = 0; i < 45; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 5 + 2;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#ffd700';
          particle.style.borderRadius = '50%';
          particle.style.boxShadow = '0 0 10px #ffd700, 0 0 20px rgba(255,215,0,0.5)';
          particle.style.animation = `luxurySparkle ${Math.random() * 8 + 10}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 4 + 's';
          particlesContainer.appendChild(particle);
        }
      }
      
      function create3DParticles() {
        // Добавляем объемный градиент
        const gradient = document.createElement('div');
        gradient.className = 'bg-gradient-animated';
        gradient.style.background = 'radial-gradient(circle at 30% 50%, rgba(42,82,152,0.4) 0%, rgba(30,60,114,0.2) 50%, transparent 100%)';
        gradient.style.backgroundSize = '200% 200%';
        gradient.style.animation = 'gradientShift 12s ease infinite';
        document.body.appendChild(gradient);
        
        for (let i = 0; i < 50; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          const size = Math.random() * 6 + 3;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.background = '#ffffff';
          particle.style.borderRadius = '50%';
          particle.style.boxShadow = '0 0 15px rgba(255,255,255,0.5)';
          particle.style.animation = `threeDDepth ${Math.random() * 6 + 8}s infinite ease-in-out`;
          particle.style.animationDelay = Math.random() * 3 + 's';
          particlesContainer.appendChild(particle);
        }
      }

      function updateParticles() {
        const currentStyle = body.className.match(/style-(\w+)/)?.[1] || 'classic';
        
        // Для некоторых стилей используем Particles.js
        if (typeof particlesJS !== 'undefined' && ['cyberpunk', 'neon'].includes(currentStyle)) {
          particlesContainer.innerHTML = '';
          setTimeout(() => {
            if (currentStyle === 'cyberpunk') {
              particlesJS('particles', {
                particles: {
                  number: { value: 80 },
                  color: { value: '#00ff41' },
                  shape: { type: 'edge' },
                  opacity: { value: 0.5 },
                  size: { value: 3 },
                  move: {
                    enable: true,
                    speed: 2,
                    direction: 'none',
                    random: true,
                    straight: false,
                    out_mode: 'out',
                    bounce: false
                  }
                },
                interactivity: {
                  detect_on: 'canvas',
                  events: {
                    onhover: { enable: true, mode: 'repulse' },
                    onclick: { enable: true, mode: 'push' }
                  }
                }
              });
            } else if (currentStyle === 'neon') {
              particlesJS('particles', {
                particles: {
                  number: { value: 100 },
                  color: { value: '#00f5ff' },
                  shape: { type: 'circle' },
                  opacity: { value: 0.8 },
                  size: { value: 4 },
                  move: {
                    enable: true,
                    speed: 3,
                    direction: 'none',
                    random: true,
                    straight: false,
                    out_mode: 'out',
                    bounce: false
                  }
                }
              });
            }
          }, 100);
        } else {
          createParticles();
        }
      }

      // Конфетти при выигрыше с улучшенными эффектами
      function celebrateWin() {
        // Canvas Confetti
        if (typeof confetti !== 'undefined') {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 },
            colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff']
          });
          
          setTimeout(() => {
            confetti({
              particleCount: 50,
              angle: 60,
              spread: 55,
              origin: { x: 0 },
              colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00']
            });
          }, 250);
          
          setTimeout(() => {
            confetti({
              particleCount: 50,
              angle: 120,
              spread: 55,
              origin: { x: 1 },
              colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00']
            });
          }, 400);
        }
        
        // Mo.js эффект
        if (typeof mo !== 'undefined') {
          const burst = new mojs.Burst({
            left: '50%',
            top: '50%',
            radius: { 0: 200 },
            count: 30,
            children: {
              shape: 'circle',
              fill: ['#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1', '#f7b731'],
              radius: { 15: 0 },
              duration: 2000,
              easing: 'elastic.out',
              delay: 'stagger(0, 50)'
            }
          });
          burst.play();
        }
        
        // Anime.js анимация для сообщения
        if (typeof anime !== 'undefined') {
          anime({
            targets: '#winMessage',
            scale: [0, 1.2, 1],
            rotate: [0, 360],
            duration: 1000,
            easing: 'easeOutElastic(1, .8)'
          });
        }
      }

      // Переключение стилей
      styleButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const style = btn.dataset.style;
          
          styleButtons.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          body.className = body.className.replace(/style-\w+/g, '');
          body.classList.add(`style-${style}`);
          
          const styleInfo = styleNames[style];
          styleTag.innerHTML = `<i class="fas ${styleInfo.icon}"></i> ${styleInfo.name}`;
          
          // Показываем/скрываем контролы Matrix
          if (matrixControls) {
            if (style === 'matrix') {
              matrixControls.style.display = 'block';
            } else {
              matrixControls.style.display = 'none';
            }
          }
          
          updateParticles();
          
          gsap.from('#app', {
            opacity: 0.5,
            scale: 0.95,
            duration: 0.5,
            ease: "power2.out"
          });

          // Звук переключения стиля - уникальный для каждого
          const newStyleSounds = styleSounds[style] || styleSounds.classic;
          if (newStyleSounds.start) {
            newStyleSounds.start();
          } else {
            playSound(440, 0.15, 'sine', 0.2);
          }
        });
      });

      function init(firstInit = true) {
        for (const door of doors) {
          if (firstInit) {
            door.dataset.spinned = '0';
            door.classList.remove('loop', 'stop');
          }

          const boxes = door.querySelector('.boxes');
          const boxesClone = boxes.cloneNode(false);
          let pool = [];

          if (!firstInit) {
            // Создаем длинный список элементов для видимой прокрутки
            const arr = [];
            for (let n = 0; n < 20; n++) {
              arr.push(...items);
            }
            pool = shuffle([...arr]);
            
            // Добавляем финальный элемент (результат)
            const finalItem = items[Math.floor(Math.random() * items.length)];
            pool.push(finalItem);
          } else {
            // Первый запуск - показываем один элемент
            pool = ['❓'];
          }

          // Создаем все элементы
          for (let i = pool.length - 1; i >= 0; i--) {
            const box = document.createElement('div');
            box.classList.add('box');
            box.style.width = door.clientWidth + 'px';
            box.style.height = door.clientHeight + 'px';
            box.textContent = pool[i];
            boxesClone.appendChild(box);
          }

          // Устанавливаем начальную позицию - элементы видны сразу
          boxesClone.style.transform = 'translateY(0px)';
          door.replaceChild(boxesClone, boxes);
        }
      }

      let isSpinning = false;
      
      function spin() {
        if (isSpinning) return;
        
        isSpinning = true;
        lever.style.pointerEvents = 'none';
        
        const styleSounds = getCurrentStyleSounds();
        
        // Анимация рычага - классический стиль
        lever.classList.add('pulled');
        if (typeof gsap !== 'undefined') {
          const isClassic = body.className.includes('style-classic');
          if (isClassic) {
            // Более выраженная анимация для классического стиля
            gsap.to(lever, {
              x: -20,
              rotation: -12,
              duration: 0.3,
              ease: "power2.out",
              transformOrigin: "bottom center"
            });
          } else {
            gsap.to(lever, {
              x: -12,
              rotation: -8,
              duration: 0.2,
              ease: "power2.out",
              transformOrigin: "bottom center"
            });
          }
        }
        
        // Звук запуска для текущего стиля
        styleSounds.start();
        
        // Инициализация элементов
        init(false);
        
        // Запускаем анимацию для каждого барабана с задержкой
        const delays = [0, 0.3, 0.6];
        const spinDurations = [2000, 2200, 2400]; // миллисекунды вращения
        
        doors.forEach((door, i) => {
          setTimeout(() => {
            // Звук вращения
            styleSounds.spin();
            
            // Убираем класс stop если был
            door.classList.remove('stop');
            // Добавляем класс loop для бесконечной анимации - элементы ВИДНЫ СРАЗУ
            door.classList.add('loop');
            
            // Останавливаем через определенное время
            setTimeout(() => {
              door.classList.remove('loop');
              
              // Вычисляем финальную позицию
              const boxes = door.querySelector('.boxes');
              const doorHeight = door.clientHeight || 110;
              const totalBoxes = boxes.children.length;
              const finalIndex = totalBoxes - 1; // Последний элемент
              const stopY = -doorHeight * finalIndex;
              
              // Получаем текущую позицию для плавной остановки
              const currentY = parseFloat(boxes.style.transform.match(/translateY\((-?\d+(?:\.\d+)?)px\)/)?.[1] || '0');
              
              // Устанавливаем CSS переменные для анимации остановки
              boxes.style.setProperty('--start-y', currentY + 'px');
              boxes.style.setProperty('--stop-y', stopY + 'px');
              
              // Запускаем анимацию остановки
              door.classList.add('stop');
              
              door.dataset.spinned = '1';
              
              // Проверяем выигрыш после всех барабанов
              const allSpinned = Array.from(doors).every(d => d.dataset.spinned === '1');
              if (allSpinned) {
                setTimeout(() => {
                  checkWin();
                  // Возвращаем рычаг
                  if (typeof gsap !== 'undefined') {
                    const isClassic = body.className.includes('style-classic');
                    if (isClassic) {
                      // Более плавное возвращение для классического стиля
                      gsap.to(lever, {
                        x: 0,
                        rotation: 0,
                        duration: 0.5,
                        ease: "back.out(2)",
                        transformOrigin: "bottom center"
                      });
                    } else {
                      gsap.to(lever, {
                        x: 0,
                        rotation: 0,
                        duration: 0.3,
                        ease: "back.out(1.7)",
                        transformOrigin: "bottom center"
                      });
                    }
                  }
                  lever.classList.remove('pulled');
                  lever.style.pointerEvents = 'auto';
                  isSpinning = false;
                }, 600);
              }
            }, spinDurations[i]);
          }, delays[i] * 1000);
        });
      }

      function checkWin() {
        const results = [];
        doors.forEach(door => {
          const box = door.querySelector('.box');
          if (box) {
            results.push(box.textContent.trim());
          }
        });

        if (results.length === 3 && results[0] === results[1] && results[1] === results[2]) {
          // Победа!
          celebrateWin();
          
          // Звук победы для текущего стиля
          const styleSounds = getCurrentStyleSounds();
          styleSounds.win();
          
          // Вибрация (если поддерживается)
          if (navigator.vibrate) {
            navigator.vibrate([100, 50, 100, 50, 200]);
          }
          
          // Обновляем дисплей для классического стиля
          const isClassic = body.className.includes('style-classic');
          if (isClassic && infoMessage) {
            infoMessage.innerHTML = '<i class="fas fa-trophy"></i> WIN: 1,000,000';
            if (typeof anime !== 'undefined') {
              anime({
                targets: infoMessage,
                scale: [1, 1.1, 1],
                duration: 500,
                easing: 'easeInOutQuad'
              });
            }
          }
          
          // Анимация выигрыша
          winMessage.textContent = 'JACKPOT!';
          gsap.fromTo(winMessage, 
            {
              opacity: 0,
              scale: 0.5,
              rotation: -180
            },
            {
              opacity: 1,
              scale: 1.3,
              rotation: 0,
              duration: 0.8,
              ease: "back.out(1.7)",
              onComplete: () => {
                gsap.to(winMessage, {
                  scale: 1,
                  duration: 0.3,
                  delay: 1.5,
                  onComplete: () => {
                    gsap.to(winMessage, {
                      opacity: 0,
                      scale: 0.5,
                      duration: 0.5
                    });
                  }
                });
              }
            }
          );
        }
      }

      function shuffle([...arr]) {
        let m = arr.length;
        while (m) {
          const i = Math.floor(Math.random() * m--);
          [arr[m], arr[i]] = [arr[i], arr[m]];
        }
        return arr;
      }

      // Инициализация
      init();
      createParticles();
      
      // Инициализация AOS
      if (typeof AOS !== 'undefined') {
        AOS.init({
          duration: 800,
          once: true,
          disable: 'mobile'
        });
      }
      
      // Дополнительные эффекты с Anime.js
      function enhanceWithAnime() {
        if (typeof anime !== 'undefined') {
          // Анимация кнопок стилей при загрузке
          anime({
            targets: '.style-btn',
            opacity: [0, 1],
            translateY: [-20, 0],
            delay: anime.stagger(50),
            duration: 600,
            easing: 'easeOutElastic(1, .8)'
          });
        }
      }
      
      // Инициализация при загрузке
      setTimeout(() => {
        enhanceWithAnime();
      }, 100);
    })();
  </script>
</body>
</html>
