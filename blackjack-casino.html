<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ë–ª—ç–∫–¥–∂–µ–∫ - –ö–∞–∑–∏–Ω–æ</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Montserrat:wght@400;600;700&family=Cinzel:wght@400;700;900&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #1a0000 0%, #330000 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }

    /* –ë–∞—Ä—Ö–∞—Ç–Ω—ã–π —Å—Ç–æ–ª —è—Ä–∫–æ–≥–æ –≤–∏–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ */
    .casino-table {
      width: 95%;
      max-width: 1200px;
      height: 700px;
      background: 
        radial-gradient(circle at 50% 50%, rgba(139, 0, 0, 0.5) 0%, transparent 70%),
        radial-gradient(circle at 20% 20%, rgba(128, 0, 32, 0.4) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(101, 15, 15, 0.4) 0%, transparent 50%),
        linear-gradient(135deg, #B80028 0%, #A00020 50%, #B80028 100%);
      background-image: 
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(0, 0, 0, 0.1) 2px,
          rgba(0, 0, 0, 0.1) 4px
        ),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0, 0, 0, 0.1) 2px,
          rgba(0, 0, 0, 0.1) 4px
        );
      border: 8px solid #8b4513;
      border-radius: 30px;
      box-shadow: 
        0 30px 80px rgba(0, 0, 0, 0.8),
        inset 0 5px 20px rgba(0, 0, 0, 0.4),
        inset 0 -5px 20px rgba(0, 0, 0, 0.4);
      position: relative;
      overflow: hidden;
      animation: tableAppear 0.8s ease-out;
    }

    @keyframes tableAppear {
      0% {
        opacity: 0;
        transform: scale(0.95) translateY(50px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    /* –ë–ª–µ—Å—Ç—è—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –±–∞—Ä—Ö–∞—Ç–∞ –≤–∏–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ */
    .casino-table::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        linear-gradient(135deg, transparent 30%, rgba(255, 255, 255, 0.08) 50%, transparent 70%);
      pointer-events: none;
      animation: velvetShine 4s ease-in-out infinite;
    }

    @keyframes velvetShine {
      0%, 100% { transform: translateX(-100%) translateY(-100%); }
      50% { transform: translateX(100%) translateY(100%); }
    }

    /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä */
    .table-info {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.4);
      padding: 8px 20px;
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.25);
      text-align: center;
      font-weight: 600;
      font-size: 11px;
      color: rgba(255, 255, 255, 0.9);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
      z-index: 10;
      font-family: 'Cinzel', serif;
      backdrop-filter: blur(5px);
    }

    /* –î–∏–ª–µ—Ä */
    .dealer-section {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 5;
    }

    .dealer-label {
      color: #ffd700;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 15px;
      text-shadow: 
        2px 2px 4px rgba(0, 0, 0, 0.8),
        0 0 15px rgba(255, 215, 0, 0.6);
      font-family: 'Cinzel', serif;
      letter-spacing: 3px;
    }

    .dealer-cards {
      display: flex;
      justify-content: center;
      gap: 8px;
      min-height: 110px;
    }

    .dealer-score {
      color: white;
      font-size: 17px;
      font-weight: 700;
      margin-top: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      font-family: 'Orbitron', sans-serif;
    }

    /* –î–∏–ª–µ—Ä - –∫–∞—Ä—Ç—ã —á—É—Ç—å –±–æ–ª—å—à–µ */
    .dealer-section .card {
      width: 88px;
      height: 123px;
      padding: 10px;
    }

    /* –ò–≥—Ä–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ */
    .player-positions {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 30px;
      width: 90%;
      justify-content: center;
    }

    .player-position-wrapper {
      flex: 1;
      max-width: 280px;
      text-align: center;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Player 2 - —Å–ª–µ–≤–∞, –º–µ–Ω—å—à–µ */
    .player-position-wrapper:first-child {
      order: 1;
      flex: 0.9;
      max-width: 240px;
    }

    /* Player 1 (YOU) - —Ü–µ–Ω—Ç—Ä, –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ */
    .player-position-wrapper:nth-child(2) {
      order: 2;
      flex: 1.1;
      max-width: 300px;
    }

    /* Player 3 - —Å–ø—Ä–∞–≤–∞, –º–µ–Ω—å—à–µ */
    .player-position-wrapper:nth-child(3) {
      order: 3;
      flex: 0.9;
      max-width: 240px;
    }

    .player-position {
      width: 100%;
      text-align: center;
      position: relative;
      padding: 20px;
      border-radius: 15px;
      border: 3px solid rgba(255, 215, 0, 0.4);
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.5),
        inset 0 2px 5px rgba(255, 215, 0, 0.1);
      transition: all 0.3s ease;
      margin-bottom: 15px;
    }

    .player-position:hover {
      border-color: rgba(255, 215, 0, 0.6);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.6),
        inset 0 2px 5px rgba(255, 215, 0, 0.2);
    }

    .player-position-wrapper .player-position.active {
      border: 3px solid #ffd700;
      background: rgba(0, 0, 0, 0.5);
      box-shadow: 
        0 0 30px rgba(255, 215, 0, 0.8),
        0 4px 15px rgba(0, 0, 0, 0.6),
        inset 0 2px 5px rgba(255, 215, 0, 0.3);
      animation: positionGlow 1.5s ease-in-out infinite;
    }

    .player-label {
      color: #ffd700;
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 
        2px 2px 4px rgba(0, 0, 0, 0.8),
        0 0 10px rgba(255, 215, 0, 0.5);
      font-family: 'Cinzel', serif;
    }

    /* Player 2 –∏ 3 - –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä */
    .player-position-wrapper:first-child .player-label,
    .player-position-wrapper:nth-child(3) .player-label {
      font-size: 14px;
    }

    .player-position-wrapper:first-child .player-position,
    .player-position-wrapper:nth-child(3) .player-position {
      padding: 15px;
      border-width: 2px;
    }

    /* Player 1 (YOU) - –±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä */
    .player-position-wrapper:nth-child(2) .player-label {
      font-size: 20px;
    }

    .player-position-wrapper:nth-child(2) .player-position {
      padding: 20px;
      border-width: 3px;
    }

    /* YOU - –∫–∞—Ä—Ç—ã —á—É—Ç—å –±–æ–ª—å—à–µ */
    .player-position-wrapper:nth-child(2) .card {
      width: 88px;
      height: 123px;
      padding: 10px;
    }

    /* YOU - –æ—á–∫–∏ —á—É—Ç—å –±–æ–ª—å—à–µ */
    .player-position-wrapper:nth-child(2) .player-score {
      font-size: 17px;
      margin-top: 10px;
    }

    .player-cards {
      display: flex;
      justify-content: center;
      gap: 6px;
      min-height: 100px;
      flex-wrap: wrap;
    }

    .player-score {
      color: white;
      font-size: 16px;
      font-weight: 700;
      margin-top: 8px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      font-family: 'Orbitron', sans-serif;
    }


    @keyframes positionGlow {
      0%, 100% {
        box-shadow: 
          0 0 30px rgba(255, 215, 0, 0.8),
          0 4px 15px rgba(0, 0, 0, 0.6),
          inset 0 2px 5px rgba(255, 215, 0, 0.3);
        border-color: #ffd700;
      }
      50% {
        box-shadow: 
          0 0 50px rgba(255, 215, 0, 1),
          0 6px 20px rgba(0, 0, 0, 0.7),
          inset 0 2px 5px rgba(255, 215, 0, 0.5);
        border-color: #ffed4e;
      }
    }

    /* –ö—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç—ã */
    .card {
      width: 85px;
      height: 120px;
      background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
      border-radius: 8px;
      border: 1px solid rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 10px;
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.3),
        inset 0 1px 1px rgba(255, 255, 255, 0.9),
        inset 0 -1px 1px rgba(0, 0, 0, 0.1);
      position: relative;
      font-weight: 700;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      cursor: pointer;
      overflow: hidden;
    }

    /* –¢–µ–∫—Å—Ç—É—Ä–∞ –∫–∞—Ä—Ç—ã */
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(0, 0, 0, 0.02) 20px, rgba(0, 0, 0, 0.02) 21px),
        repeating-linear-gradient(90deg, transparent, transparent 20px, rgba(0, 0, 0, 0.02) 20px, rgba(0, 0, 0, 0.02) 21px);
      pointer-events: none;
    }

    .card:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 
        0 8px 16px rgba(0, 0, 0, 0.4),
        inset 0 1px 1px rgba(255, 255, 255, 0.95);
      z-index: 20;
    }

    .card.dealing {
      animation: cardDeal 0.8s ease-out forwards;
    }

    @keyframes cardDeal {
      0% {
        opacity: 0;
        transform: scale(0.3) rotateY(180deg) translateX(300px) translateY(-200px) rotateZ(-30deg);
      }
      60% {
        opacity: 1;
        transform: scale(1.1) rotateY(0deg) translateX(0) translateY(-15px) rotateZ(5deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotateY(0deg) translateX(0) translateY(0) rotateZ(0deg);
      }
    }

    .card.flip {
      animation: cardFlip 0.6s ease-in-out forwards;
    }

    @keyframes cardFlip {
      0% { transform: rotateY(0deg) scale(1); }
      50% { transform: rotateY(90deg) scale(1.05); }
      100% { transform: rotateY(0deg) scale(1); }
    }

    .card.red {
      color: #d32f2f;
    }

    .card.black {
      color: #1a1a1a;
    }

    .card-rank {
      font-size: 20px;
      line-height: 1.1;
      font-weight: 900;
      font-family: 'Cinzel', serif;
      flex-shrink: 0;
    }

    .card-suit {
      font-size: 32px;
      text-align: center;
      line-height: 1;
      margin: 4px 0;
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-rank-bottom {
      font-size: 20px;
      line-height: 1.1;
      transform: rotate(180deg);
      text-align: right;
      font-weight: 900;
      font-family: 'Cinzel', serif;
      flex-shrink: 0;
    }

    /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–∫–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç (YOU –∏ –î–∏–ª–µ—Ä) */
    .player-position-wrapper:nth-child(2) .card-rank,
    .dealer-section .card-rank {
      font-size: 20px;
    }

    .player-position-wrapper:nth-child(2) .card-suit,
    .dealer-section .card-suit {
      font-size: 33px;
    }

    .player-position-wrapper:nth-child(2) .card-rank-bottom,
    .dealer-section .card-rank-bottom {
      font-size: 20px;
    }

    /* –û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∫–∞—Ä—Ç—ã */
    .card-back {
      background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
      background-image: 
        repeating-linear-gradient(
          45deg,
          transparent,
          transparent 8px,
          rgba(255, 255, 255, 0.08) 8px,
          rgba(255, 255, 255, 0.08) 16px
        ),
        repeating-linear-gradient(
          -45deg,
          transparent,
          transparent 8px,
          rgba(255, 255, 255, 0.08) 8px,
          rgba(255, 255, 255, 0.08) 16px
        );
      border: 2px solid rgba(255, 255, 255, 0.2);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
    }

    .card-back::before {
      display: none;
    }

    /* –ö–æ–ª–æ–¥–∞ */
    .deck-container {
      position: absolute;
      top: 180px;
      right: 40px;
      z-index: 15;
    }

    .deck-with-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .deck {
      width: 75px;
      height: 105px;
      background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
      background-image: 
        repeating-linear-gradient(
          45deg,
          transparent,
          transparent 8px,
          rgba(255, 255, 255, 0.1) 8px,
          rgba(255, 255, 255, 0.1) 16px
        );
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 
        0 6px 12px rgba(0, 0, 0, 0.5),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
      animation: deckPulse 2s ease-in-out infinite;
    }

    @keyframes deckPulse {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-3px) scale(1.02); }
    }

    .deck:hover {
      transform: translateY(-5px) scale(1.05);
    }

    .deck-count {
      position: absolute;
      bottom: -25px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 12px;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      font-family: 'Orbitron', sans-serif;
    }

    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - –ø–æ–¥ –∫–æ–ª–æ–¥–æ–π */
    .controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      z-index: 20;
      margin-top: 40px;
    }

    .control-btn {
      width: 50px;
      height: 50px;
      border: none;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      font-size: 20px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Montserrat', sans-serif;
      padding: 0;
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(102, 126, 234, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .control-btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: rotate(45deg);
      transition: all 0.5s;
    }

    .control-btn:hover:not(:disabled)::before {
      animation: shine 0.5s ease-in-out;
    }

    @keyframes shine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .control-btn:hover:not(:disabled) {
      transform: translateY(-3px) scale(1.1);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(102, 126, 234, 0.6),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .control-btn:active:not(:disabled) {
      transform: translateY(-1px) scale(1.05);
      box-shadow: 
        0 3px 10px rgba(0, 0, 0, 0.3),
        0 0 15px rgba(102, 126, 234, 0.5);
    }

    .control-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .control-btn i {
      font-size: 18px;
    }

    /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ —Å—Ç–µ–∫–ª–æ–º */
    .control-btn[id="hitBtn"] {
      background: linear-gradient(135deg, rgba(0, 255, 0, 0.9) 0%, rgba(0, 204, 0, 0.9) 100%);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(0, 255, 0, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
    }

    .control-btn[id="hitBtn"]:hover:not(:disabled) {
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(0, 255, 0, 0.6),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    .control-btn[id="standBtn"] {
      background: linear-gradient(135deg, rgba(255, 0, 0, 0.9) 0%, rgba(204, 0, 0, 0.9) 100%);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(255, 0, 0, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
    }

    .control-btn[id="standBtn"]:hover:not(:disabled) {
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(255, 0, 0, 0.6),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    .control-btn[id="dealBtn"] {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(102, 126, 234, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
    }

    .control-btn[id="dealBtn"]:hover:not(:disabled) {
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(102, 126, 234, 0.6),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    .control-btn[id="doubleBtn"] {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.9) 0%, rgba(255, 170, 0, 0.9) 100%);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(255, 215, 0, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
    }

    .control-btn[id="doubleBtn"]:hover:not(:disabled) {
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(255, 215, 0, 0.6),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
    .info-bar {
      position: absolute;
      top: 20px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 20;
      gap: 15px;
    }

    .info-item {
      flex: 1;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
      backdrop-filter: blur(10px);
      border: 3px solid rgba(102, 126, 234, 0.8);
      padding: 12px 20px;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 14px;
      font-family: 'Montserrat', sans-serif;
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(102, 126, 234, 0.6),
        0 0 50px rgba(102, 126, 234, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      animation: neonPulse 3s ease-in-out infinite;
    }

    @keyframes neonPulse {
      0%, 100% {
        border-color: rgba(102, 126, 234, 0.8);
        box-shadow: 
          0 4px 15px rgba(0, 0, 0, 0.4),
          0 0 30px rgba(102, 126, 234, 0.6),
          0 0 50px rgba(102, 126, 234, 0.4),
          inset 0 2px 4px rgba(255, 255, 255, 0.2);
      }
      50% {
        border-color: rgba(118, 75, 162, 1);
        box-shadow: 
          0 4px 15px rgba(0, 0, 0, 0.4),
          0 0 40px rgba(102, 126, 234, 0.8),
          0 0 70px rgba(118, 75, 162, 0.6),
          inset 0 2px 4px rgba(255, 255, 255, 0.3);
      }
    }

    .info-item:hover {
      transform: translateY(-2px);
      border-color: rgba(255, 255, 255, 0.6);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.5),
        0 0 50px rgba(102, 126, 234, 0.9),
        0 0 80px rgba(118, 75, 162, 0.7),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    .info-item span {
      color: white;
      font-weight: 700;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }

    /* –ó–≤–µ–∑–¥–æ—á–∫–∞-–≤–∞–ª—é—Ç–∞ */
    .star-currency {
      display: inline-block;
      color: #ffd700;
      font-size: inherit;
      line-height: inherit;
      font-weight: 700;
      margin-left: 2px;
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffa500 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 0 3px rgba(255, 215, 0, 0.8));
      animation: starGlow 2s ease-in-out infinite;
      vertical-align: baseline;
    }

    @keyframes starGlow {
      0%, 100% {
        filter: drop-shadow(0 0 3px rgba(255, 215, 0, 0.8));
        opacity: 1;
      }
      50% {
        filter: drop-shadow(0 0 6px rgba(255, 215, 0, 1));
        opacity: 1;
      }
    }

    /* –í—ã–∏–≥—Ä—ã—à - —è—Ä–∫–∏–π –Ω–µ–æ–Ω */
    .info-item:last-child {
      background: linear-gradient(135deg, rgba(0, 255, 0, 0.9) 0%, rgba(0, 200, 0, 0.9) 100%);
      border: 3px solid rgba(0, 255, 0, 0.9);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.4),
        0 0 40px rgba(0, 255, 0, 0.8),
        0 0 70px rgba(0, 255, 0, 0.6),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
      animation: winNeonPulse 2s ease-in-out infinite;
    }

    @keyframes winNeonPulse {
      0%, 100% {
        border-color: rgba(0, 255, 0, 0.9);
        box-shadow: 
          0 4px 15px rgba(0, 0, 0, 0.4),
          0 0 40px rgba(0, 255, 0, 0.8),
          0 0 70px rgba(0, 255, 0, 0.6),
          inset 0 2px 4px rgba(255, 255, 255, 0.3);
      }
      50% {
        border-color: rgba(0, 255, 0, 1);
        box-shadow: 
          0 4px 15px rgba(0, 0, 0, 0.4),
          0 0 60px rgba(0, 255, 0, 1),
          0 0 100px rgba(0, 255, 0, 0.8),
          inset 0 2px 4px rgba(255, 255, 255, 0.4);
      }
    }

    .info-item:last-child:hover {
      border-color: rgba(0, 255, 0, 1);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.5),
        0 0 70px rgba(0, 255, 0, 1),
        0 0 120px rgba(0, 255, 0, 0.9),
        inset 0 2px 4px rgba(255, 255, 255, 0.4);
    }

    .info-item:last-child span {
      color: #ffffff;
      text-shadow: 
        0 0 10px rgba(255, 255, 255, 1),
        0 0 20px rgba(0, 255, 0, 0.8);
      font-weight: 900;
    }

    /* –°–æ–æ–±—â–µ–Ω–∏—è */
    .game-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      padding: 30px 50px;
      border-radius: 15px;
      font-size: 28px;
      font-weight: 900;
      color: white;
      text-shadow: 0 0 20px currentColor;
      font-family: 'Cinzel', serif;
      letter-spacing: 2px;
      opacity: 0;
      pointer-events: none;
      transition: all 0.5s ease;
      z-index: 100;
      border: 3px solid;
    }

    .game-message.show {
      opacity: 1;
    }

    .game-message.win {
      color: #00ff00;
      border-color: #00ff00;
      box-shadow: 0 0 50px rgba(0, 255, 0, 0.5);
      animation: winPulse 1s ease-in-out infinite;
    }

    .game-message.lose {
      color: #ff0000;
      border-color: #ff0000;
      box-shadow: 0 0 50px rgba(255, 0, 0, 0.5);
      animation: loseShake 0.5s ease-in-out;
    }

    .game-message.draw {
      color: #ffd700;
      border-color: #ffd700;
      box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
    }

    @keyframes winPulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.1); }
    }

    @keyframes loseShake {
      0%, 100% { transform: translate(-50%, -50%) translateX(0); }
      25% { transform: translate(-50%, -50%) translateX(-10px); }
      75% { transform: translate(-50%, -50%) translateX(10px); }
    }

    /* –°—Ç–∞–≤–∫–∏ */

    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∂–∏–º–∞ Casino) */
    @media screen and (max-width: 900px) and (orientation: landscape) {
      body {
        padding: 5px;
      }

      

      

      

      

      .casino-table {
        width: 100%;
        height: 100vh;
        max-height: calc(100vh - 10px);
        border-radius: 15px;
        border-width: 4px;
      }

      .info-bar {
        top: 5px;
        left: 5px;
        right: 5px;
        gap: 5px;
      }

      .info-item {
        padding: 6px 10px;
        font-size: 10px;
        border-radius: 8px;
      }

      .table-info {
        bottom: 5px;
        padding: 4px 10px;
        font-size: 8px;
      }

      .dealer-section {
        top: 30px;
      }

      .dealer-label {
        font-size: 14px;
        margin-bottom: 5px;
      }

      .dealer-cards {
        gap: 5px;
      }

      .dealer-score {
        font-size: 10px;
        margin-top: 5px;
      }

      .card {
        width: 35px;
        height: 49px;
        font-size: 10px;
      }

      .card-rank {
        font-size: 12px;
      }

      .card-suit {
        font-size: 14px;
      }

      .player-positions {
        bottom: 50px;
        gap: 10px;
      }

      .player-position {
        padding: 8px;
        min-width: 120px;
      }

      .player-label {
        font-size: 10px;
        margin-bottom: 5px;
        padding: 2px 6px;
      }

      .player-cards {
        gap: 5px;
        margin: 5px 0;
      }

      .player-score {
        font-size: 9px;
        margin-top: 3px;
      }


      .deck-container {
        top: 50px;
      }

      .deck {
        width: 45px;
        height: 63px;
      }

      .deck-count {
        font-size: 10px;
        bottom: -18px;
      }

      .controls {
        margin-top: 30px;
        gap: 5px;
      }

      .control-btn {
        width: 40px;
        height: 40px;
      }

      .control-btn i {
        font-size: 14px;
      }

      .game-message {
        padding: 15px 25px;
        font-size: 18px;
      }
    }

    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ (–ø–æ—Ä—Ç—Ä–µ—Ç) */
    @media screen and (max-width: 600px) and (orientation: portrait) {
      body {
        padding: 5px;
        overflow-y: auto;
      }

      .casino-table {
        width: 100%;
        height: auto;
        min-height: 100vh;
        max-height: none;
        border-radius: 15px;
        border-width: 4px;
        padding: 10px;
        display: flex;
        flex-direction: column;
      }

      /* Info bar - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–≤–µ—Ä—Ö—É */
      .info-bar {
        position: relative;
        top: 0;
        left: 0;
        right: 0;
        gap: 5px;
        margin-bottom: 10px;
        flex-wrap: wrap;
      }

      .info-item {
        flex: 1;
        min-width: calc(33.33% - 4px);
        padding: 8px 10px;
        font-size: 11px;
        border-radius: 8px;
      }

      /* –î–∏–ª–µ—Ä - –∫–æ–º–ø–∞–∫—Ç–Ω–æ –≤–≤–µ—Ä—Ö—É */
      .dealer-section {
        position: relative;
        top: 0;
        left: 0;
        transform: none;
        margin: 10px 0;
        order: 1;
      }

      .dealer-label {
        font-size: 14px;
        margin-bottom: 5px;
      }

      .dealer-cards {
        gap: 4px;
        min-height: 60px;
      }

      .dealer-score {
        font-size: 12px;
        margin-top: 5px;
      }

      /* –ö–∞—Ä—Ç—ã - –º–µ–Ω—å—à–µ */
      .card {
        width: 30px;
        height: 42px;
        font-size: 8px;
      }

      .card-rank {
        font-size: 10px;
      }

      .card-suit {
        font-size: 12px;
      }

      /* –ò–≥—Ä–æ–∫–∏ - YOU —Å–≤–µ—Ä—Ö—É, Player 2 –∏ 3 –≤ —Ä—è–¥ –ø–æ–¥ –Ω–∏–º */
      .player-positions {
        position: relative;
        bottom: auto;
        left: 0;
        transform: none;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        width: 100%;
        margin-top: 10px;
        order: 2;
        align-items: flex-start;
        justify-content: center;
      }

      .player-position-wrapper {
        flex: none;
      }

      /* YOU - —Å–≤–µ—Ä—Ö—É, –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
      .player-position-wrapper:nth-child(2) {
        order: 1;
        flex: 0 0 100%;
        max-width: 100%;
        width: 100%;
        margin-bottom: 10px;
      }

      /* Player 2 - —Å–ª–µ–≤–∞ –ø–æ–¥ YOU, –º–µ–Ω—å—à–µ */
      .player-position-wrapper:first-child {
        order: 2;
        flex: 0 0 calc(50% - 4px);
        max-width: calc(50% - 4px);
      }

      /* Player 3 - —Å–ø—Ä–∞–≤–∞ –ø–æ–¥ YOU, –º–µ–Ω—å—à–µ */
      .player-position-wrapper:nth-child(3) {
        order: 3;
        flex: 0 0 calc(50% - 4px);
        max-width: calc(50% - 4px);
      }

      .player-position {
        padding: 12px;
        min-width: auto;
        width: 100%;
      }

      /* Player 2 –∏ 3 - –º–µ–Ω—å—à–∏–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ */
      .player-position-wrapper:first-child .player-position,
      .player-position-wrapper:nth-child(3) .player-position {
        padding: 8px;
      }

      .player-label {
        font-size: 12px;
        margin-bottom: 5px;
      }

      /* YOU - –±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ */
      .player-position-wrapper:nth-child(2) .player-label {
        font-size: 16px;
      }

      .player-position-wrapper:nth-child(2) .player-position {
        padding: 15px;
        border-width: 3px;
      }

      /* AI –∏–≥—Ä–æ–∫–∏ - –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä */
      .player-position-wrapper:first-child .player-label,
      .player-position-wrapper:nth-child(3) .player-label {
        font-size: 11px;
      }

      .player-position-wrapper:first-child .player-position,
      .player-position-wrapper:nth-child(3) .player-position {
        padding: 10px;
        border-width: 2px;
      }

      .player-cards {
        gap: 4px;
        margin: 5px 0;
        min-height: 50px;
      }

      .player-score {
        font-size: 11px;
        margin-top: 5px;
      }

      /* –ö–æ–ª–æ–¥–∞ –∏ –∫–Ω–æ–ø–∫–∏ - —Å–Ω–∏–∑—É */
      .deck-container {
        position: relative;
        top: auto;
        right: auto;
        left: 0;
        transform: none;
        width: 100%;
        order: 3;
        margin-top: 15px;
      }

      .deck-with-controls {
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 15px;
      }

      .deck {
        width: 40px;
        height: 56px;
      }

      .deck-count {
        font-size: 10px;
        position: relative;
        bottom: auto;
        left: auto;
        transform: none;
        margin-top: 5px;
      }

      .controls {
        flex-direction: row;
        margin-top: 0;
        gap: 8px;
      }

      .control-btn {
        width: 45px;
        height: 45px;
      }

      .control-btn i {
        font-size: 16px;
      }

      /* –ü—Ä–∞–≤–∏–ª–∞ - –≤–Ω–∏–∑—É */
      .table-info {
        position: relative;
        bottom: auto;
        left: 0;
        transform: none;
        margin-top: 15px;
        padding: 6px 12px;
        font-size: 9px;
        order: 4;
      }

      .game-message {
        padding: 20px 30px;
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="casino-table" id="casinoTable">
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="info-bar">
      <div class="info-item">–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span> <span class="star-currency">‚òÖ</span></div>
      <div class="info-item">–°—Ç–∞–≤–∫–∞: <span id="currentBet">100</span> <span class="star-currency">‚òÖ</span></div>
      <div class="info-item">–í—ã–∏–≥—Ä—ã—à: <span id="winAmount">0</span> <span class="star-currency">‚òÖ</span></div>
    </div>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä -->
    <div class="table-info">
      BLACKJACK PAYS 3 TO 2 | DEALER MUST STAND ON 17
    </div>

    <!-- –ö–æ–ª–æ–¥–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ -->
    <div class="deck-container">
      <div class="deck-with-controls">
        <div class="deck" id="deck"></div>
        <div class="deck-count" id="deckCount">52</div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="controls">
          <button class="control-btn" id="hitBtn" title="–í–∑—è—Ç—å –∫–∞—Ä—Ç—É">
            <i class="fas fa-plus"></i>
          </button>
          <button class="control-btn" id="standBtn" title="–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è">
            <i class="fas fa-hand-paper"></i>
          </button>
          <button class="control-btn" id="dealBtn" title="–†–∞–∑–¥–∞—Ç—å">
            <i class="fas fa-play"></i>
          </button>
          <button class="control-btn" id="doubleBtn" style="display: none;" title="–£–¥–≤–æ–∏—Ç—å">
            <i class="fas fa-arrows-alt-h"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- –î–∏–ª–µ—Ä -->
    <div class="dealer-section">
      <div class="dealer-label">–î–ò–õ–ï–†</div>
      <div class="dealer-cards" id="dealerCards"></div>
      <div class="dealer-score" id="dealerScore">–û—á–∫–∏: 0</div>
    </div>

    <!-- –ò–≥—Ä–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ -->
    <div class="player-positions">
      <!-- Player 2 - —Å–ª–µ–≤–∞ -->
      <div class="player-position-wrapper">
        <div class="player-position" data-position="1">
          <div class="player-label">Anonymous</div>
          <div class="player-cards" id="playerCards1"></div>
          <div class="player-score" id="playerScore1">–û—á–∫–∏: 0</div>
        </div>
      </div>
      <!-- Player 1 (YOU) - —Ü–µ–Ω—Ç—Ä, –±–æ–ª—å—à–µ -->
      <div class="player-position-wrapper">
        <div class="player-position active" data-position="0">
          <div class="player-label">YOU</div>
          <div class="player-cards" id="playerCards0"></div>
          <div class="player-score" id="playerScore0">–û—á–∫–∏: 0</div>
        </div>
      </div>
      <!-- Player 3 - —Å–ø—Ä–∞–≤–∞ -->
      <div class="player-position-wrapper">
        <div class="player-position" data-position="2">
          <div class="player-label">Anonymous</div>
          <div class="player-cards" id="playerCards2"></div>
          <div class="player-score" id="playerScore2">–û—á–∫–∏: 0</div>
        </div>
      </div>
    </div>


    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div class="game-message" id="gameMessage"></div>
  </div>

  <script>
    (function() {
      // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      let blackjackDeck = [];
      let dealerHand = [];
      let playerHands = [[], [], []]; // –¢—Ä–∏ –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
      let currentPosition = 0; // –¢–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
      let balance = 1000;
      let currentBet = 100;
      let gameInProgress = false;

      // –≠–ª–µ–º–µ–Ω—Ç—ã
      const dealerCardsEl = document.querySelector('#dealerCards');
      const playerCardsEls = [
        document.querySelector('#playerCards0'),
        document.querySelector('#playerCards1'),
        document.querySelector('#playerCards2')
      ];
      const playerScoreEls = [
        document.querySelector('#playerScore0'),
        document.querySelector('#playerScore1'),
        document.querySelector('#playerScore2')
      ];
      const dealerScoreEl = document.querySelector('#dealerScore');
      const balanceEl = document.querySelector('#balance');
      const currentBetEl = document.querySelector('#currentBet');
      const winAmountEl = document.querySelector('#winAmount');
      const gameMessage = document.querySelector('#gameMessage');
      const hitBtn = document.querySelector('#hitBtn');
      const standBtn = document.querySelector('#standBtn');
      const dealBtn = document.querySelector('#dealBtn');
      const doubleBtn = document.querySelector('#doubleBtn');
      const deckEl = document.querySelector('#deck');
      const deckCountEl = document.querySelector('#deckCount');
      const playerPositions = document.querySelectorAll('.player-position');

      // –ö–æ–ª–æ–¥–∞
      const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
      const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];

      // –ó–≤—É–∫–∏
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();

      function playCardSound() {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(150, audioContext.currentTime + 0.1);
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.1);
      }

      function playFlipSound() {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.15);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.15);
      }

      function createDeck() {
        const deck = [];
        suits.forEach(suit => {
          ranks.forEach(rank => {
            deck.push({ suit, rank, value: getCardValue(rank) });
          });
        });
        return shuffleDeck(deck);
      }

      function shuffleDeck(deck) {
        const shuffled = [...deck];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      }

      function getCardValue(rank) {
        if (rank === 'A') return 11;
        if (['J', 'Q', 'K'].includes(rank)) return 10;
        return parseInt(rank);
      }

      function calculateScore(hand) {
        let score = 0;
        let aces = 0;
        hand.forEach(card => {
          if (card.rank === 'A') {
            aces++;
            score += 11;
          } else {
            score += card.value;
          }
        });
        while (score > 21 && aces > 0) {
          score -= 10;
          aces--;
        }
        return score;
      }

      function updateDeckCount() {
        if (deckCountEl) {
          deckCountEl.textContent = blackjackDeck.length;
          if (blackjackDeck.length < 10) {
            deckCountEl.style.color = '#ff0000';
          } else {
            deckCountEl.style.color = 'white';
          }
        }
      }

      function createCardElement(card, isHidden = false, fromDeck = false) {
        const cardEl = document.createElement('div');
        cardEl.className = 'card';
        
        if (fromDeck) cardEl.classList.add('dealing');
        
        if (isHidden) {
          cardEl.classList.add('card-back');
          cardEl.innerHTML = 'üÇ†';
        } else {
          const isRed = card.suit === '‚ô•' || card.suit === '‚ô¶';
          cardEl.classList.add(isRed ? 'red' : 'black');
          cardEl.innerHTML = `
            <div class="card-rank">${card.rank}</div>
            <div class="card-suit">${card.suit}</div>
            <div class="card-rank-bottom">${card.rank}</div>
          `;
        }
        
        return cardEl;
      }

      function renderCards() {
        // –î–∏–ª–µ—Ä
        dealerCardsEl.innerHTML = '';
        dealerHand.forEach((card, index) => {
          const isHidden = index === 0 && gameInProgress;
          const cardEl = createCardElement(card, isHidden, false);
          dealerCardsEl.appendChild(cardEl);
        });
        dealerScoreEl.textContent = gameInProgress ? '–û—á–∫–∏: ?' : `–û—á–∫–∏: ${calculateScore(dealerHand)}`;

        // –ò–≥—Ä–æ–∫–∏
        playerHands.forEach((hand, posIndex) => {
          playerCardsEls[posIndex].innerHTML = '';
          // –ü–æ–∑–∏—Ü–∏–∏ 1 –∏ 2 (–ò–ì–†–û–ö 2 –∏ –ò–ì–†–û–ö 3) –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä—É–±–∞—à–∫–æ–π –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
          const shouldHide = (posIndex === 1 || posIndex === 2) && gameInProgress;
          hand.forEach(card => {
            const cardEl = createCardElement(card, shouldHide, false);
            playerCardsEls[posIndex].appendChild(cardEl);
          });
          const score = calculateScore(hand);
          // –î–ª—è AI –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—á–∫–∏ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
          if (shouldHide) {
            playerScoreEls[posIndex].textContent = '–û—á–∫–∏: ?';
          } else {
            playerScoreEls[posIndex].textContent = score > 0 ? `–û—á–∫–∏: ${score}` : '–û—á–∫–∏: 0';
          }
        });
      }

      function dealCardToPosition(position, isDealer = false, hidden = false, delay = 0) {
        setTimeout(() => {
          if (blackjackDeck.length === 0) {
            blackjackDeck = createDeck();
          }
          
          const card = blackjackDeck.pop();
          playCardSound();
          
          if (isDealer) {
            dealerHand.push(card);
            dealerCardsEl.innerHTML = '';
            dealerHand.forEach((c, i) => {
              const isHidden = i === 0 && gameInProgress;
              const cardEl = createCardElement(c, isHidden, true);
              dealerCardsEl.appendChild(cardEl);
            });
          } else {
            playerHands[position].push(card);
            // –î–ª—è –ø–æ–∑–∏—Ü–∏–π 1 –∏ 2 (AI –∏–≥—Ä–æ–∫–∏) –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç—ã —Ä—É–±–∞—à–∫–æ–π –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
            const shouldHide = (position === 1 || position === 2) && gameInProgress;
            const cardEl = createCardElement(card, shouldHide, true);
            playerCardsEls[position].appendChild(cardEl);
            const score = calculateScore(playerHands[position]);
            // –î–ª—è AI –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—á–∫–∏ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
            if (shouldHide) {
              playerScoreEls[position].textContent = '–û—á–∫–∏: ?';
            } else {
              playerScoreEls[position].textContent = `–û—á–∫–∏: ${score}`;
            }
          }
          
          updateDeckCount();
        }, delay);
      }

      function flipDealerCard() {
        const firstCard = dealerCardsEl.querySelector('.card-back');
        if (firstCard) {
          playFlipSound();
          firstCard.classList.add('flip');
          setTimeout(() => {
            firstCard.classList.remove('card-back');
            const card = dealerHand[0];
            const isRed = card.suit === '‚ô•' || card.suit === '‚ô¶';
            firstCard.classList.add(isRed ? 'red' : 'black');
            firstCard.innerHTML = `
              <div class="card-rank">${card.rank}</div>
              <div class="card-suit">${card.suit}</div>
              <div class="card-rank-bottom">${card.rank}</div>
            `;
          }, 300);
        }
      }

      function dealCards() {
        if (balance < currentBet) {
          showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'lose');
          return;
        }
        
        // –°–ø–∏—Å—ã–≤–∞–µ–º —Å—Ç–∞–≤–∫—É —Ç–æ–ª—å–∫–æ –∑–∞ –∏–≥—Ä–æ–∫–∞ YOU (–ø–æ–∑–∏—Ü–∏—è 0)
        balance -= currentBet;
        balanceEl.textContent = balance;
        
        // –û—á–∏—Å—Ç–∫–∞
        dealerHand = [];
        playerHands = [[], [], []];
        currentPosition = 0;
        gameInProgress = true;
        gameMessage.classList.remove('show');
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã
        if (blackjackDeck.length < 10) {
          blackjackDeck = createDeck();
        }
        
        renderCards();
        updateButtons();
        
        // –†–∞–∑–¥–∞—á–∞
        // –ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–∞ –∏–≥—Ä–æ–∫–∞–º
        dealCardToPosition(0, false, false, 200);
        dealCardToPosition(1, false, false, 400);
        dealCardToPosition(2, false, false, 600);
        
        // –ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–∞ –¥–∏–ª–µ—Ä—É
        dealCardToPosition(0, true, true, 800);
        
        // –í—Ç–æ—Ä–∞—è –∫–∞—Ä—Ç–∞ –∏–≥—Ä–æ–∫–∞–º
        dealCardToPosition(0, false, false, 1000);
        dealCardToPosition(1, false, false, 1200);
        dealCardToPosition(2, false, false, 1400);
        
        // –í—Ç–æ—Ä–∞—è –∫–∞—Ä—Ç–∞ –¥–∏–ª–µ—Ä—É
        dealCardToPosition(0, true, false, 1600);
        
        setTimeout(() => {
          updateButtons();
          // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –ø–æ–∑–∏—Ü–∏—é
          setActivePosition(0);
        }, 1800);
      }

      function hit() {
        if (!gameInProgress || currentPosition !== 0) return; // –¢–æ–ª—å–∫–æ –¥–ª—è YOU (–ø–æ–∑–∏—Ü–∏—è 0)
        
        dealCardToPosition(currentPosition, false, false, 0);
        
        setTimeout(() => {
          const score = calculateScore(playerHands[currentPosition]);
          if (score > 21) {
            playerScoreEls[currentPosition].textContent = `–û—á–∫–∏: ${score} (–ü–µ—Ä–µ–±–æ—Ä!)`;
            moveToNextPosition();
          } else if (score === 21) {
            moveToNextPosition();
          }
          updateButtons();
        }, 800);
      }

      function stand() {
        if (!gameInProgress || currentPosition !== 0) return; // –¢–æ–ª—å–∫–æ –¥–ª—è YOU (–ø–æ–∑–∏—Ü–∏—è 0)
        moveToNextPosition();
      }

      function moveToNextPosition() {
        // –ò–≥—Ä–æ–∫ 1 (–ø–æ–∑–∏—Ü–∏—è 0) –∑–∞–∫–æ–Ω—á–∏–ª, —Ç–µ–ø–µ—Ä—å –∏–≥—Ä–∞—é—Ç AI –∏–≥—Ä–æ–∫–∏
        if (currentPosition === 0) {
          // –ò–≥—Ä–æ–∫ 1 –∑–∞–∫–æ–Ω—á–∏–ª, –∑–∞–ø—É—Å–∫–∞–µ–º AI –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ 2 –∏ 3
          playAIPlayers();
        } else {
          // –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Å—ã–≥—Ä–∞–ª–∏, —Ö–æ–¥ –¥–∏–ª–µ—Ä–∞
          dealerTurn();
        }
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–≥—Ä—ã AI –∏–≥—Ä–æ–∫–æ–≤ (–ø–æ–∑–∏—Ü–∏–∏ 1 –∏ 2)
      function playAIPlayers() {
        let aiPosition = 1; // –ù–∞—á–∏–Ω–∞–µ–º —Å –ò–ì–†–û–ö 2 (–ø–æ–∑–∏—Ü–∏—è 1)
        
        function playNextAI() {
          if (aiPosition > 2) {
            // –í—Å–µ AI –∏–≥—Ä–æ–∫–∏ —Å—ã–≥—Ä–∞–ª–∏, —Ö–æ–¥ –¥–∏–ª–µ—Ä–∞
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ AI –∏–≥—Ä–æ–∫–∞
            setActivePosition(-1);
            dealerTurn();
            return;
          }
          
          setActivePosition(aiPosition);
          
          // –ü—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º: –µ—Å–ª–∏ —Å—É–º–º–∞ < 16, –±–µ—Ä–µ–º –∫–∞—Ä—Ç—É, –∏–Ω–∞—á–µ –Ω–µ –±–µ—Ä–µ–º
          const score = calculateScore(playerHands[aiPosition]);
          
          if (score < 16 && score <= 21) {
            // –ë–µ—Ä–µ–º –∫–∞—Ä—Ç—É
            dealCardToPosition(aiPosition, false, false, 0);
            setTimeout(() => {
              const newScore = calculateScore(playerHands[aiPosition]);
              if (newScore > 21) {
                // –ü–µ—Ä–µ–±–æ—Ä, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É AI
                playerScoreEls[aiPosition].textContent = `–û—á–∫–∏: ${newScore} (–ü–µ—Ä–µ–±–æ—Ä!)`;
                aiPosition++;
                setTimeout(playNextAI, 1000);
              } else if (newScore < 16) {
                // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±—Ä–∞—Ç—å –∫–∞—Ä—Ç—ã
                setTimeout(playNextAI, 800);
              } else {
                // >= 16, –Ω–µ –±–µ—Ä–µ–º, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
                aiPosition++;
                setTimeout(playNextAI, 1000);
              }
            }, 800);
          } else {
            // >= 16 –∏–ª–∏ –ø–µ—Ä–µ–±–æ—Ä, –Ω–µ –±–µ—Ä–µ–º, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
            aiPosition++;
            setTimeout(playNextAI, 1000);
          }
        }
        
        // –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É AI –∏–≥—Ä–æ–∫–æ–≤
        setTimeout(playNextAI, 500);
      }

      function setActivePosition(position) {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º data-position –≤–º–µ—Å—Ç–æ –∏–Ω–¥–µ–∫—Å–∞ –º–∞—Å—Å–∏–≤–∞
        playerPositions.forEach((pos) => {
          const posValue = parseInt(pos.getAttribute('data-position'));
          if (posValue === position && position >= 0) {
            pos.classList.add('active');
          } else {
            pos.classList.remove('active');
          }
        });
        if (position >= 0) {
          currentPosition = position;
        }
        updateButtons();
      }

      function dealerTurn() {
        gameInProgress = false;
        flipDealerCard();
        
        setTimeout(() => {
          let dealerCardDelay = 500;
          const dealerInterval = setInterval(() => {
            if (calculateScore(dealerHand) < 17) {
              dealCardToPosition(0, true, false, 0);
              dealerCardDelay += 800;
            } else {
              clearInterval(dealerInterval);
              setTimeout(() => {
                endGame();
              }, 800);
            }
          }, 800);
        }, 600);
      }

      function endGame() {
        const dealerScore = calculateScore(dealerHand);
        dealerScoreEl.textContent = `–û—á–∫–∏: ${dealerScore}`;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç—ã AI –∏–≥—Ä–æ–∫–æ–≤ (—Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º —Ä—É–±–∞—à–∫–∏)
        gameInProgress = false;
        renderCards();
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—ã–∏–≥—Ä—ã—à —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞ YOU (–ø–æ–∑–∏—Ü–∏—è 0)
        let totalWin = 0;
        let allBust = true;
        
        playerHands.forEach((hand, idx) => {
          const playerScore = calculateScore(hand);
          let win = 0;
          
          if (playerScore > 21) {
            // –ü–µ—Ä–µ–±–æ—Ä
          } else if (playerScore === 21 && hand.length === 2) {
            // –ë–ª—ç–∫–¥–∂–µ–∫
            win = currentBet * 2.5;
            if (idx === 0) { // –¢–æ–ª—å–∫–æ –¥–ª—è YOU
              totalWin += win;
            }
            allBust = false;
          } else if (dealerScore > 21 || playerScore > dealerScore) {
            win = currentBet * 2;
            if (idx === 0) { // –¢–æ–ª—å–∫–æ –¥–ª—è YOU
              totalWin += win;
            }
            allBust = false;
          } else if (playerScore === dealerScore) {
            win = currentBet;
            if (idx === 0) { // –¢–æ–ª—å–∫–æ –¥–ª—è YOU
              totalWin += win;
            }
            allBust = false;
          }
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
          playerScoreEls[idx].textContent = `–û—á–∫–∏: ${playerScore}`;
          if (win > 0) {
            playerScoreEls[idx].innerHTML += ` (+${win}<span class="star-currency">‚òÖ</span>)`;
          }
        });
        
        // –ù–∞—á–∏—Å–ª—è–µ–º –≤—ã–∏–≥—Ä—ã—à —Ç–æ–ª—å–∫–æ –Ω–∞ –±–∞–ª–∞–Ω—Å YOU
        balance += totalWin;
        balanceEl.textContent = balance;
        winAmountEl.textContent = totalWin;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤—ã–∏–≥—Ä—ã—à–∞—Ö –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
        let messageDelay = 0;
        const messageQueue = [];
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–∏–≥—Ä—ã—à–∏ –∏–≥—Ä–æ–∫–æ–≤
        playerHands.forEach((hand, idx) => {
          const playerScore = calculateScore(hand);
          let win = 0;
          let playerName = '';
          
          if (idx === 0) {
            playerName = 'YOU';
          } else {
            playerName = 'Anonymous';
          }
          
          if (playerScore > 21) {
            // –ü–µ—Ä–µ–±–æ—Ä - –ø—Ä–æ–∏–≥—Ä—ã—à
          } else if (playerScore === 21 && hand.length === 2) {
            // –ë–ª—ç–∫–¥–∂–µ–∫
            win = currentBet * 2.5;
            if (dealerScore !== 21 || dealerHand.length !== 2) {
              messageQueue.push({ text: `${playerName} –≤—ã–∏–≥—Ä–∞–ª: ${win}‚òÖ (–ë–ª—ç–∫–¥–∂–µ–∫)!`, type: 'win', delay: messageDelay });
              messageDelay += 2500;
            }
          } else if (dealerScore > 21 || playerScore > dealerScore) {
            // –í—ã–∏–≥—Ä—ã—à
            win = currentBet * 2;
            messageQueue.push({ text: `${playerName} –≤—ã–∏–≥—Ä–∞–ª: ${win}‚òÖ!`, type: 'win', delay: messageDelay });
            messageDelay += 2500;
          } else if (playerScore === dealerScore) {
            // –ù–∏—á—å—è
            win = currentBet;
            messageQueue.push({ text: `${playerName}: –ù–∏—á—å—è!`, type: 'draw', delay: messageDelay });
            messageDelay += 2000;
          } else if (dealerScore <= 21 && dealerScore > playerScore) {
            // –ü—Ä–æ–∏–≥—Ä—ã—à –¥–∏–ª–µ—Ä—É
            messageQueue.push({ text: `${playerName} –ø—Ä–æ–∏–≥—Ä–∞–ª –¥–∏–ª–µ—Ä—É!`, type: 'lose', delay: messageDelay });
            messageDelay += 2000;
          }
        });
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–∏–≥—Ä—ã—à –¥–∏–ª–µ—Ä–∞
        let dealerWins = 0;
        playerHands.forEach((hand, idx) => {
          const playerScore = calculateScore(hand);
          if (playerScore <= 21 && dealerScore <= 21 && dealerScore > playerScore) {
            dealerWins++;
          } else if (playerScore > 21 && dealerScore <= 21) {
            dealerWins++;
          }
        });
        
        if (dealerWins > 0 && dealerScore <= 21) {
          const dealerWinAmount = dealerWins * currentBet;
          messageQueue.push({ text: `–î–∏–ª–µ—Ä –≤—ã–∏–≥—Ä–∞–ª: ${dealerWinAmount}‚òÖ!`, type: 'lose', delay: messageDelay });
          messageDelay += 2500;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
        messageQueue.forEach(msg => {
          setTimeout(() => {
            showMessage(msg.text, msg.type);
            if (msg.type === 'win' && msg.text.includes('YOU')) {
              if (typeof confetti !== 'undefined') {
                confetti({
                  particleCount: 100,
                  spread: 70,
                  origin: { y: 0.6 }
                });
              }
            }
          }, msg.delay);
        });
        
        // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—â–µ–µ
        if (messageQueue.length === 0) {
          if (allBust) {
            showMessage('–í—Å–µ –ø–µ—Ä–µ–±–æ—Ä—ã!', 'lose');
          } else if (totalWin === 0 && dealerWins === 0) {
            showMessage('–ù–∏—á—å—è!', 'draw');
          }
        }
        
        updateButtons();
      }

      function showMessage(text, type) {
        gameMessage.textContent = text;
        gameMessage.className = `game-message ${type} show`;
        setTimeout(() => {
          gameMessage.classList.remove('show');
        }, 3000);
      }

      function updateButtons() {
        if (gameInProgress) {
          // –ö–Ω–æ–ø–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞ 1 (–ø–æ–∑–∏—Ü–∏—è 0)
          if (currentPosition === 0) {
            hitBtn.disabled = false;
            standBtn.disabled = false;
            dealBtn.disabled = true;
            const hand = playerHands[currentPosition];
            if (hand && hand.length === 2 && balance >= currentBet * 2) {
              doubleBtn.style.display = 'flex';
              doubleBtn.disabled = false;
            } else {
              doubleBtn.style.display = 'none';
            }
          } else {
            // –î–ª—è AI –∏–≥—Ä–æ–∫–æ–≤ –∫–Ω–æ–ø–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã
            hitBtn.disabled = true;
            standBtn.disabled = true;
            dealBtn.disabled = true;
            doubleBtn.style.display = 'none';
          }
        } else {
          hitBtn.disabled = true;
          standBtn.disabled = true;
          dealBtn.disabled = false;
          doubleBtn.style.display = 'none';
        }
      }

      // –°–æ–±—ã—Ç–∏—è
      hitBtn.addEventListener('click', hit);
      standBtn.addEventListener('click', stand);
      dealBtn.addEventListener('click', dealCards);
      doubleBtn.addEventListener('click', () => {
        if (balance < currentBet * 2) return;
        balance -= currentBet;
        currentBet *= 2;
        balanceEl.textContent = balance;
        hit();
        setTimeout(() => stand(), 800);
      });

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–∑–∏–Ω–æ —Å—Ç–∏–ª—è
      blackjackDeck = createDeck();
      updateDeckCount();
      updateButtons();
    })();
  </script>
</body>
</html>
